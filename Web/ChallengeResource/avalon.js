(function(c,b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=c.document?b(c,true):function(d){if(!d.document){throw new Error("Avalon requires a window with a document")}return b(d)}}else{b(c)}}(typeof window!=="undefined"?window:this,function(b0,aX){var aD=new Date()-0;var ct=b0.document;var b=ct.getElementsByTagName("head")[0];var ay=b.insertBefore(document.createElement("avalon"),b.firstChild);ay.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";ay.setAttribute("ms-skip","1");ay.className="avalonHide";var am=/\[native code\]/;function ck(){if(b0.console&&avalon.config.debug){Function.apply.call(console.log,console,arguments)}}var cC="$"+aD;var an=b0.require;var al=b0.define;var q;var I=false;var bM=/[^, ]+/g;var z=/^(?:object|array)$/;var at=/^\[object SVG\w*Element\]$/;var F=/^\[object (?:Window|DOMWindow|global)\]$/;var bo=Object.prototype;var b4=bo.hasOwnProperty;var cv=bo.toString;var cL=Array.prototype;var V=cL.slice;var bR={};var aN=b0.dispatchEvent;var cX=ct.documentElement;var b9=ct.createDocumentFragment();var c9=ct.createElement("div");var aC={};"Boolean Number String Function Array Date RegExp Object Error".replace(bM,function(e){aC["[object "+e+"]"]=e.toLowerCase()});function l(){}function dc(dp,dm){if(typeof dp==="string"){dp=dp.match(bM)||[]}var e={},dl=dm!==void 0?dm:1;for(var ap=0,dn=dp.length;ap<dn;ap++){e[dp[ap]]=dl}return e}var bz=function(e){e=e||"avalon";return String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)};function c0(){if(b0.VBArray){var e=document.documentMode;return e?e:b0.XMLHttpRequest?7:6}else{return 0}}var bV=c0();avalon=function(e){return new avalon.init(e)};avalon.nextTick=new function(){var dl=b0.setImmediate;var ap=b0.MutationObserver;var dn=aN&&b0.postMessage;if(dl){return dl.bind(b0)}var e=[];function dp(){var dr=e.length;for(var dq=0;dq<dr;dq++){e[dq]()}e=e.slice(dr)}if(ap){var dm=document.createTextNode("avalon");new ap(dp).observe(dm,{characterData:true});return function(dq){e.push(dq);dm.data=Math.random()}}if(dn){b0.addEventListener("message",function(dr){var dq=dr.source;if((dq===b0||dq===null)&&dr.data==="process-tick"){dr.stopPropagation();dp()}});return function(dq){e.push(dq);b0.postMessage("process-tick","*")}}return function(dq){setTimeout(dq,0)}};avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?aC[cv.call(e)]||"object":typeof e};var C=typeof alert==="object"?function(ap){try{return/^\s*\bfunction\b/.test(ap+"")}catch(dl){return false}}:function(e){return cv.call(e)==="[object Function]"};avalon.isFunction=C;avalon.isWindow=function(e){if(!e){return false}return e==e.document&&e.document!=e};function a6(e){return F.test(cv.call(e))}if(a6(b0)){avalon.isWindow=a6}var aE;for(aE in avalon({})){break}var di=aE!=="0";avalon.isPlainObject=function(dm,ap){if(!dm||avalon.type(dm)!=="object"||dm.nodeType||avalon.isWindow(dm)){return false}try{if(dm.constructor&&!b4.call(dm,"constructor")&&!b4.call(dm.constructor.prototype,"isPrototypeOf")){return false}}catch(dl){return false}if(di){for(ap in dm){return b4.call(dm,ap)}}for(ap in dm){}return ap===void 0||b4.call(dm,ap)};if(am.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return cv.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===bo}}avalon.mix=avalon.fn.mix=function(){var dv,dm,ap,dl,ds,dt,dr=arguments[0]||{},dp=1,dn=arguments.length,du=false;if(typeof dr==="boolean"){du=dr;dr=arguments[1]||{};dp++}if(typeof dr!=="object"&&!C(dr)){dr={}}if(dp===dn){dr=this;dp--}for(;dp<dn;dp++){if((dv=arguments[dp])!=null){for(dm in dv){ap=dr[dm];try{dl=dv[dm]}catch(dq){continue}if(dr===dl){continue}if(du&&dl&&(avalon.isPlainObject(dl)||(ds=Array.isArray(dl)))){if(ds){ds=false;dt=ap&&Array.isArray(ap)?ap:[]}else{dt=ap&&avalon.isPlainObject(ap)?ap:{}}dr[dm]=avalon.mix(du,dt,dl)}else{if(dl!==void 0){dr[dm]=dl}}}}}return dr};function a9(ap,e){ap=Math.floor(ap)||0;return ap<0?Math.max(e+ap,0):Math.min(ap,e)}avalon.mix({rword:bM,subscribers:cC,version:1.44,ui:{},log:ck,slice:aN?function(ap,dl,e){return V.call(ap,dl,e)}:function(dl,dp,ap){var dm=[];var e=dl.length;if(ap===void 0){ap=e}if(typeof ap==="number"&&isFinite(ap)){dp=a9(dp,e);ap=a9(ap,e);for(var dn=dp;dn<ap;++dn){dm[dn-dp]=dl[dn]}}return dm},noop:l,error:function(dl,ap){throw (ap||Error)(dl)},oneObject:dc,range:function(dp,ap,dn){dn||(dn=1);if(ap==null){ap=dp||0;dp=0}var dl=-1,dm=Math.max(0,Math.ceil((ap-dp)/dn)),e=new Array(dm);while(++dl<dm){e[dl]=dp;dp+=dn}return e},eventHooks:{},bind:function(dn,dm,dl,ap){var e=avalon.eventHooks;var dp=e[dm];if(typeof dp==="object"){dm=dp.type;if(dp.deel){dl=dp.deel(dn,dm,dl,ap)}}var dq=aN?dl:function(dr){dl.call(dn,cg(dr))};if(aN){dn.addEventListener(dm,dq,!!ap)}else{dn.attachEvent("on"+dm,dq)}return dq},unbind:function(dn,dm,dl,ap){var e=avalon.eventHooks;var dp=e[dm];var dq=dl||l;if(typeof dp==="object"){dm=dp.type;if(dp.deel){dl=dp.deel(dn,dm,dl,false)}}if(aN){dn.removeEventListener(dm,dq,!!ap)}else{dn.detachEvent("on"+dm,dq)}},css:function(dl,e,dm){if(dl instanceof avalon){dl=dl[0]}var dp=/[_-]/.test(e)?m(e):e,ap;e=avalon.cssName(dp)||dp;if(dm===void 0||typeof dm==="boolean"){ap=v[dp+":get"]||v["@:get"];if(e==="background"){e="backgroundColor"}var dn=ap(dl,e);return dm===true?parseFloat(dn)||0:dn}else{if(dm===""){dl.style[e]=""}else{if(dm==null||dm!==dm){return}if(isFinite(dm)&&!avalon.cssNumber[dp]){dm+="px"}ap=v[dp+":set"]||v["@:set"];ap(dl,e,dm)}}},each:function(dl,ap){if(dl){var e=0;if(aT(dl)){for(var dm=dl.length;e<dm;e++){if(ap(e,dl[e])===false){break}}}else{for(e in dl){if(dl.hasOwnProperty(e)&&ap(e,dl[e])===false){break}}}}},getWidgetData:function(dm,dn){var ap=avalon(dm).data();var e={};for(var dl in ap){if(dl.indexOf(dn)===0){e[dl.replace(dn,"").replace(/\w/,function(dp){return dp.toLowerCase()})]=ap[dl]}}return e},Array:{ensure:function(ap,e){if(ap.indexOf(e)===-1){return ap.push(e)}},removeAt:function(ap,e){return !!ap.splice(e,1).length},remove:function(dl,ap){var e=dl.indexOf(ap);if(~e){return avalon.Array.removeAt(dl,e)}return false}}});var db=avalon.bindingHandlers={};var aj=avalon.bindingExecutors={};function aT(dm){if(!dm){return false}var dn=dm.length;if(dn===(dn>>>0)){var ap=cv.call(dm).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(ap)){return false}if(ap==="Array"){return true}try{if({}.propertyIsEnumerable.call(dm,"length")===false){return/^\s?function/.test(dm.item||dm.callee)}return true}catch(dl){return !dm.window}}return false}var h=new function(){function e(dl){this.size=0;this.limit=dl;this.head=this.tail=void 0;this._keymap={}}var ap=e.prototype;ap.put=function(dl,dn){var dm={key:dl,value:dn};this._keymap[dl]=dm;if(this.tail){this.tail.newer=dm;dm.older=this.tail}else{this.head=dm}this.tail=dm;if(this.size===this.limit){this.shift()}else{this.size++}return dn};ap.shift=function(){var dl=this.head;if(dl){this.head=this.head.newer;this.head.older=dl.newer=dl.older=this._keymap[dl.key]=void 0}};ap.get=function(dl){var dm=this._keymap[dl];if(dm===void 0){return}if(dm===this.tail){return dm.value}if(dm.newer){if(dm===this.head){this.head=dm.newer}dm.newer.older=dm.older}if(dm.older){dm.older.newer=dm.newer}dm.newer=void 0;dm.older=this.tail;if(this.tail){this.tail.newer=dm}this.tail=dm;return dm.value};return e};if(!"司徒正美".trim){var N=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(N,"")}}var dk=!({"toString":null}).propertyIsEnumerable("toString"),bh=(function(){}).propertyIsEnumerable("prototype"),A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],av=A.length;if(!Object.keys){Object.keys=function(dl){var dn=[];var ds=bh&&typeof dl==="function";if(typeof dl==="string"||(dl&&dl.callee)){for(var dq=0;dq<dl.length;++dq){dn.push(String(dq))}}else{for(var e in dl){if(!(ds&&e==="prototype")&&b4.call(dl,e)){dn.push(String(e))}}}if(dk){var dr=dl.constructor,ap=dr&&dr.prototype===dl;for(var dp=0;dp<av;dp++){var dm=A[dp];if(!(ap&&dm==="constructor")&&b4.call(dl,dm)){dn.push(dm)}}}return dn}}if(!Array.isArray){Array.isArray=function(e){return cv.call(e)==="[object Array]"}}if(!l.bind){Function.prototype.bind=function(dl){if(arguments.length<2&&dl===void 0){return this}var ap=this,e=arguments;return function(){var dm=[],dn;for(dn=1;dn<e.length;dn++){dm.push(e[dn])}for(dn=0;dn<arguments.length;dn++){dm.push(arguments[dn])}return ap.apply(dl,dm)}}}function bt(dm,e,dl){var ap="for(var "+dm+"i=0,n = this.length; i < n; i++){"+e.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+dl;return Function("fn,scope",ap)}if(!am.test([].map)){avalon.mix(cL,{indexOf:function(dl,e){var dm=this.length,ap=~~e;if(ap<0){ap+=dm}for(;ap<dm;ap++){if(this[ap]===dl){return ap}}return -1},lastIndexOf:function(dl,e){var dm=this.length,ap=e==null?dm-1:e;if(ap<0){ap=Math.max(0,dm+ap)}for(;ap>=0;ap--){if(this[ap]===dl){return ap}}return -1},forEach:bt("","_",""),filter:bt("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:bt("r=[],","r[i]=_","return r"),some:bt("","if(_)return true","return false"),every:bt("","if(!_)return false","return true")})}function t(ap,dl){try{while((dl=dl.parentNode)){if(dl===ap){return true}}return false}catch(dm){return false}}avalon.contains=t;if(!ct.contains){ct.contains=function(e){return t(ct,e)}}function r(){return new XMLSerializer().serializeToString(this)}if(b0.SVGElement){if(!ct.createTextNode("x").contains){Node.prototype.contains=function(e){return !!(this.compareDocumentPosition(e)&16)}}var ba="http://www.w3.org/2000/svg";var bJ=ct.createElementNS(ba,"svg");bJ.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!at.test(bJ.firstChild)){function bU(dn,dp){if(dn&&dn.childNodes){var ap=dn.childNodes;for(var dl=0,dm;dm=ap[dl++];){if(dm.tagName){var e=ct.createElementNS(ba,dm.tagName.toLowerCase());cL.forEach.call(dm.attributes,function(dq){e.setAttribute(dq.name,dq.value)});bU(dm,e);dp.appendChild(e)}}}}Object.defineProperties(SVGElement.prototype,{"outerHTML":{enumerable:true,configurable:true,get:r,set:function(ap){var e=this.tagName.toLowerCase(),dl=this.parentNode,dn=avalon.parseHTML(ap);if(e==="svg"){dl.insertBefore(dn,this)}else{var dm=ct.createDocumentFragment();bU(dn,dm);dl.insertBefore(dm,this)}dl.removeChild(this)}},"innerHTML":{enumerable:true,configurable:true,get:function(){var ap=this.outerHTML;var e=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var dl=new RegExp("</"+this.nodeName+">$","i");return ap.replace(e,"").replace(dl,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var ap=avalon.parseHTML(e);bU(ap,this)}}}})}}if(!cX.outerHTML&&b0.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",r)}var cS=/^(?:mouse|contextmenu|drag)|click/;function cg(dm){var e={};for(var ap in dm){e[ap]=dm[ap]}var dp=e.target=dm.srcElement;if(dm.type.indexOf("key")===0){e.which=dm.charCode!=null?dm.charCode:dm.keyCode}else{if(cS.test(dm.type)){var dn=dp.ownerDocument||ct;var dl=dn.compatMode==="BackCompat"?dn.body:dn.documentElement;e.pageX=dm.clientX+(dl.scrollLeft>>0)-(dl.clientLeft>>0);e.pageY=dm.clientY+(dl.scrollTop>>0)-(dl.clientTop>>0);e.wheelDeltaY=e.wheelDelta;e.wheelDeltaX=0}}e.timeStamp=new Date()-0;e.originalEvent=dm;e.preventDefault=function(){dm.returnValue=false};e.stopPropagation=function(){dm.cancelBubble=true};return e}var bp=avalon.eventHooks;if(!("onmouseenter" in cX)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(ap,e){bp[ap]={type:e,deel:function(dn,dl,dm){return function(dq){var dp=dq.relatedTarget;if(!dp||(dp!==dn&&!(dn.compareDocumentPosition(dp)&16))){delete dq.type;dq.type=ap;return dm.call(dn,dq)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,ap){if(b0[e]&&!bp.animationend){bp.animationend={type:ap}}});if(!("oninput" in ct.createElement("input"))){bp.input={type:"propertychange",deel:function(dl,e,ap){return function(dm){if(dm.propertyName==="value"){dm.type="input";return ap.call(dl,dm)}}}}}if(ct.onmousewheel===void 0){var b8=ct.onwheel!==void 0?"wheel":"DOMMouseScroll";var bn=b8==="wheel"?"deltaY":"detail";bp.mousewheel={type:b8,deel:function(dl,e,ap){return function(dm){dm.wheelDeltaY=dm.wheelDelta=dm[bn]>0?-120:120;dm.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(dm,"type",{value:"mousewheel"})}ap.call(dl,dm)}}}}function au(e){for(var ap in e){if(!b4.call(e,ap)){continue}var dl=e[ap];if(typeof au.plugins[ap]==="function"){au.plugins[ap](dl)}else{if(typeof au[ap]==="object"){avalon.mix(au[ap],dl)}else{au[ap]=dl}}}return this}var cx,bi,ak,aI,a3,X=/[-.*+?^${}()|[\]\/\\]/g;function b3(e){return(e+"").replace(X,"\\$&")}var dh={loader:function(ap){var e=q&&ap;b0.require=e?q:an;b0.define=e?q.define:al},interpolate:function(dm){cx=dm[0];bi=dm[1];if(cx===bi){throw new SyntaxError("openTag!==closeTag")}else{if(dm+""==="<!--,-->"){au.commentInterpolate=true}else{var dl=cx+"test"+bi;c9.innerHTML=dl;if(c9.innerHTML!==dl&&c9.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}c9.innerHTML=""}}var e=b3(cx),ap=b3(bi);ak=new RegExp(e+"(.*?)"+ap);aI=new RegExp(e+"(.*?)"+ap,"g");a3=new RegExp(e+".*?"+ap+"|\\sms-")}};au.debug=true;au.plugins=dh;au.plugins["interpolate"](["{{","}}"]);au.paths={};au.shim={};au.maxRepeatSize=100;avalon.config=au;var c2=/(\w+)\[(avalonctrl)="(\S+)"\]/;var ci=ct.querySelectorAll?function(e){return ct.querySelectorAll(e)}:function(dp){var ap=dp.match(c2);var dn=ct.getElementsByTagName(ap[1]);var e=[];for(var dl=0,dm;dm=dn[dl++];){if(dm.getAttribute(ap[2])===ap[3]){e.push(dm)}}return e};var cF={$watch:function(e,dl){if(typeof dl==="function"){var ap=this.$events[e];if(ap){ap.push(dl)}else{this.$events[e]=[dl]}}else{this.$events=this.$watch.backup}return this},$unwatch:function(ap,dn){var dm=arguments.length;if(dm===0){this.$watch.backup=this.$events;this.$events={}}else{if(dm===1){this.$events[ap]=[]}else{var dl=this.$events[ap]||[];var e=dl.length;while(~--e<0){if(dl[e]===dn){return dl.splice(e,1)}}}}return this},$fire:function(dt){var dr,dl,dv,dw;if(/^(\w+)!(\S+)$/.test(dt)){dr=RegExp.$1;dt=RegExp.$2}var dx=this.$events;if(!dx){return}var ds=V.call(arguments,1);var dm=[dt].concat(ds);if(dr==="all"){for(dl in avalon.vmodels){dv=avalon.vmodels[dl];if(dv!==this){dv.$fire.apply(dv,dm)}}}else{if(dr==="up"||dr==="down"){var e=dx.expr?ci(dx.expr):[];if(e.length===0){return}for(dl in avalon.vmodels){dv=avalon.vmodels[dl];if(dv!==this){if(dv.$events.expr){var dn=ci(dv.$events.expr);if(dn.length===0){continue}cL.forEach.call(dn,function(dy){cL.forEach.call(e,function(dA){var dz=dr==="down"?dA.contains(dy):dy.contains(dA);if(dz){dy._avalon=dv}})})}}}var ap=ct.getElementsByTagName("*");var dq=[];cL.forEach.call(ap,function(dy){if(dy._avalon){dq.push(dy._avalon);dy._avalon="";dy.removeAttribute("_avalon")}});if(dr==="up"){dq.reverse()}for(dl=0;dw=dq[dl++];){if(dw.$fire.apply(dw,dm)===false){break}}}else{var dp=dx[dt]||[];var du=dx.$all||[];for(dl=0;dw=dp[dl++];){if(C(dw)){dw.apply(this,ds)}}for(dl=0;dw=du[dl++];){if(C(dw)){dw.apply(this,arguments)}}}}}};var cV=avalon.vmodels={};avalon.define=function(dn,e){var dm=dn.$id||dn;if(!dm){ck("warning: vm必须指定$id")}if(cV[dm]){ck("warning: "+dm+" 已经存在于avalon.vmodels中")}if(typeof dn==="object"){var ap=ce(dn)}else{var dl={$watch:l};e(dl);ap=ce(dl);I=true;e(ap);I=false}ap.$id=dm;return cV[dm]=ap};var bW=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray,$proxy,$compute").match(bM);var cy=Object.defineProperty;var bl=true;try{cy({},"_",{value:"x"});var s=Object.defineProperties}catch(ca){bl=false}function ce(e,dl,dq){if(Array.isArray(e)){var ds=e.concat();e.length=0;var dt=ab(e);dt.pushArray(ds);return dt}if(!e||e.nodeType>0||(e.$id&&e.$events)){return e}var dw=Array.isArray(e.$skipArray)?e.$skipArray:[];dw.$special=dl||{};var dm={};dq=dq||{};var du={};var dr={};var dn=[];bW.forEach(function(dx){delete e[dx]});for(var dp in e){(function(dy,dz,dx){dq[dy]=dz;if(!cA(dy,dz,dw)){return}du[dy]=[];var dA=avalon.type(dz);if(dA==="object"&&C(dz.get)&&Object.keys(dz).length<=2){dx=cw(dy,dz);dn.push(dx)}else{if(z.test(dA)){dx=H(dy,dz,dA,du[dy])}else{dx=cn(dy,dz)}}dr[dy]=dx})(dp,e[dp])}dm=s(dm,O(dr),e);for(var ap in e){if(!dr[ap]){dm[ap]=e[ap]}}dm.$id=bz();dm.$model=dq;dm.$events=du;for(dp in cF){var dv=cF[dp];if(!aN){dv=dv.bind(dm)}dm[dp]=dv}if(bl){Object.defineProperty(dm,"hasOwnProperty",{value:function(dx){return dx in this.$model},writable:false,enumerable:false,configurable:true})}else{dm.hasOwnProperty=function(dx){return dx in dm.$model}}dm.$compute=function(){dn.forEach(function(dx){co.begin({callback:function(dA,dz){var dy=dz._name;if(dz!==dx){var dB=dA.$events[dy];dx.vm=dm;ad(dB,dx.digest)}}});try{dx.get.call(dm)}finally{co.end()}})};dm.$compute();return dm}function cn(ap,dl){function e(dn){var dm=e._value;if(arguments.length>0){if(!I&&!bK(dn,dm)){e.updateValue(this,dn);e.notify(this,dn,dm)}return this}else{co.collectDependency(this,e);return dm}}cu(e,ap);e._value=dl;return e}function cw(dl,ap){ap.set=ap.set||l;function e(dp){var dn=e._value;var dq="_value" in e;if(arguments.length>0){if(I){return this}e.set.call(this,dp);return this}else{dp=e.get.call(this);if(dn!==dp){e.updateValue(this,dp);dq&&e.notify(this,dp,dn)}return dp}}e.set=ap.set||l;e.get=ap.get;cu(e,dl);var dm;e.digest=function(){e.updateValue=bB;e.notify=l;e.call(e.vm);clearTimeout(dm);dm=setTimeout(function(){cu(e,e._name);e.call(e.vm)})};return e}function H(dl,dm,dp,dn){function e(dv){var du=e._value;var dt=e._vmodel;if(arguments.length>0){if(I){return this}if(dp==="array"){var ds=dt._;dt._=[];dt.clear();dt._=ds;dt.pushArray(dv)}else{if(dp==="object"){var dr=dt.$proxy;var dq=this.$events[dl]||[];dt=e._vmodel=ce(dv);dt.$events[cC]=dq;dt.$proxy=dr;if(dq.length){dq.forEach(function(dw){if(dw.rollback){dw.rollback()}db[dw.type](dw,dw.vmodels)})}}}e.updateValue(this,dt.$model);e.notify(this,this._value,du);return this}else{co.collectDependency(this,e);return dt}}cu(e,dl);var ap=e._vmodel=ce(dm);ap.$events[cC]=dn;return e}function de(ap,e){ap.$model[this._name]=this._value=e}function bB(ap,e){ap.$model[this._name]=e}function cK(dm,dl,ap){var e=this._name;var dn=dm.$events[e];if(dn){cT(dn);cF.$fire.call(dm,e,dl,ap)}}function cu(e,ap){e._name=ap;e.updateValue=de;e.notify=cK}var bK=Object.is||function(ap,e){if(ap===0&&e===0){return 1/ap===1/e}else{if(ap!==ap){return e!==e}else{return ap===e}}};function cA(dl,dm,ap){if(C(dm)||dm&&dm.nodeType){return false}if(ap.indexOf(dl)!==-1){return false}var e=ap.$special;if(dl&&dl.charAt(0)==="$"&&!e[dl]){return false}return true}var O=aN?function(dl){var ap={};for(var e in dl){ap[e]={get:dl[e],set:dl[e],enumerable:true,configurable:true}}return ap}:function(e){return e};if(!bl){if("__defineGetter__" in avalon){cy=function(e,dl,ap){if("value" in ap){e[dl]=ap.value}if("get" in ap){e.__defineGetter__(dl,ap.get)}if("set" in ap){e.__defineSetter__(dl,ap.set)}return e};s=function(ap,e){for(var dl in e){if(e.hasOwnProperty(dl)){cy(ap,dl,e[dl])}}return ap}}if(bV){var E={};b0.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function cd(ap,dm,dl,dn){var e=dm[dl];if(arguments.length===4){e.call(ap,dn)}else{return e.call(ap)}}s=function(dn,dm,dp){var ap=[];ap.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d, p)","\t\tSet [__data__] = d: set [__proxy__] = p","\t\tSet [__const__] = Me","\tEnd Function");for(dn in dp){if(!dm.hasOwnProperty(dn)){ap.push("\tPublic ["+dn+"]")}}bW.forEach(function(dr){if(!dm.hasOwnProperty(dr)){ap.push("\tPublic ["+dr+"]")}});ap.push("\tPublic ["+"hasOwnProperty"+"]");for(dn in dm){ap.push("\tPublic Property Let ["+dn+"](val"+aD+")",'\t\tCall [__proxy__](Me,[__data__], "'+dn+'", val'+aD+")","\tEnd Property","\tPublic Property Set ["+dn+"](val"+aD+")",'\t\tCall [__proxy__](Me,[__data__], "'+dn+'", val'+aD+")","\tEnd Property","\tPublic Property Get ["+dn+"]","\tOn Error Resume Next","\t\tSet["+dn+'] = [__proxy__](Me,[__data__],"'+dn+'")',"\tIf Err.Number <> 0 Then","\t\t["+dn+'] = [__proxy__](Me,[__data__],"'+dn+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")}ap.push("End Class");var e=ap.join("\r\n");var dq=E[e];if(!dq){dq=bz("VBClass");b0.parseVB("Class "+dq+e);b0.parseVB(["Function "+dq+"Factory(a, b)","\tDim o","\tSet o = (New "+dq+")(a, b)","\tSet "+dq+"Factory = o","End Function"].join("\r\n"));E[e]=dq}var dl=b0[dq+"Factory"](dm,cd);return dl}}}function ab(e){var dl=[];dl.$id=bz();dl.$model=e;dl.$events={};dl.$events[cC]=[];dl._=ce({length:e.length});dl._.$watch("length",function(dn,dm){dl.$fire("length",dn,dm)});for(var ap in cF){dl[ap]=cF[ap]}dl.$map={el:1};dl.$proxy=[];avalon.mix(dl,cI);return dl}function bE(e,dx,dm,dt,ap,dy,ds){var dl=this.length,dq=2;while(--dq){switch(e){case"add":var dn=dx+dm;var dv=this.$model.slice(dx,dn).map(function(dz){if(z.test(avalon.type(dz))){return dz.$id?dz:ce(dz,0,dz)}else{return dz}});bH.apply(this,[dx,0].concat(dv));for(var dp=dx;dp<dn;dp++){var dw=bL(dp,this);this.$proxy.splice(dp,0,dw)}this._fire("add",dx,dm);break;case"del":var du=this._splice(dx,dm);var dr=this.$proxy.splice(dx,dm);Z(dr,"each");this._fire("del",dx,dm);break}if(ap){e=ap;dx=dy;dm=ds;dq=2;ap=0}}ac(this.$proxy,dt);if(this.length!==dl){this._.length=this.length}return du}var bH=cL.splice;var cI={_splice:bH,_fire:function(dl,ap,e){cT(this.$events[cC],dl,ap,e)},size:function(){return this._.length},pushArray:function(dl){var e=dl.length,ap=this.length;if(e){cL.push.apply(this.$model,dl);bE.call(this,"add",ap,e,Math.max(0,ap-1))}return e+ap},push:function(){var dl=[];var e,ap=arguments.length;for(e=0;e<ap;e++){dl[e]=arguments[e]}return this.pushArray(dl)},unshift:function(){var e=arguments.length,ap=this.length;if(e){cL.unshift.apply(this.$model,arguments);bE.call(this,"add",0,e,0)}return e+ap},shift:function(){if(this.length){var e=this.$model.shift();bE.call(this,"del",0,1,0);return e}},pop:function(){var ap=this.length;if(ap){var e=this.$model.pop();bE.call(this,"del",ap-1,1,Math.max(0,ap-2));return e}},splice:function(dn){var e=arguments.length,ap=[],dm;var dl=bH.apply(this.$model,arguments);if(dl.length){ap.push("del",dn,dl.length,0);dm=true}if(e>2){if(dm){ap.splice(3,1,0,"add",dn,e-2)}else{ap.push("add",dn,e-2,0)}dm=true}if(dm){return bE.apply(this,ap)}else{return[]}},contains:function(e){return this.indexOf(e)!==-1},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if(e>=0){this.$model.splice(e,1);return bE.call(this,"del",e,1,0)}return[]},clear:function(){Z(this.$proxy,"each");this.$model.length=this.$proxy.length=this.length=this._.length=0;this._fire("clear",0);return this},removeAll:function(ap){if(Array.isArray(ap)){for(var e=this.length-1;e>=0;e--){if(ap.indexOf(this[e])!==-1){this.removeAt(e)}}}else{if(typeof ap==="function"){for(e=this.length-1;e>=0;e--){if(ap(this[e],e)){this.removeAt(e)}}}else{this.clear()}}},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},set:function(e,dn){if(e>=0){var dp=avalon.type(dn);if(dn&&dn.$model){dn=dn.$model}var dm=this[e];if(dp==="object"){for(var dl in dn){if(dm.hasOwnProperty(dl)){dm[dl]=dn[dl]}}}else{if(dp==="array"){dm.clear().push.apply(dm,dn)}else{if(dm!==dn){this[e]=dn;this.$model[e]=dn;var ap=this.$proxy[e];if(ap){cT(ap.$events.$index)}}}}}return this}};function ac(dm,dl){var ap=dm.length-1;for(var e;e=dm[dl];dl++){e.$index=dl;e.$first=dl===0;e.$last=dl===ap}}function be(dp,ap){var dm={};for(var dl=0,dn=ap.length;dl<dn;dl++){dm[dl]=dp[dl];var e=ap[dl];if(e in dm){dp[dl]=dm[e];delete dm[e]}else{dp[dl]=dp[e]}}}"sort,reverse".replace(bM,function(e){cI[e]=function(){var dr=this.$model;var dq=dr.concat();var du=Math.random();var dn=[];var dt;cL[e].apply(dr,arguments);for(var dm=0,dl=dq.length;dm<dl;dm++){var ds=dr[dm];var ap=dq[dm];if(bK(ds,ap)){dn.push(dm)}else{var dp=dq.indexOf(ds);dn.push(dp);dq[dp]=du;dt=true}}if(dt){be(this,dn);be(this.$proxy,dn);this._fire("move",dn);ac(this.$proxy,0)}return this}});var aM=[];function b7(){var dl={$index:NaN,$first:NaN,$last:NaN,$map:{},$host:{},$outer:{},$remove:avalon.noop,el:{get:function(){return this.$host[this.$index]},set:function(dm){this.$host.set(this.$index,dm)}}};var e={$last:1,$first:1,$index:1};var ap=ce(dl,e);ap.$id=bz("$proxy$each");return ap}function bL(e,dm){var ap=aM.shift();if(!ap){ap=b7()}else{ap.$compute()}var dl=dm.length-1;ap.$host=dm;ap.$index=e;ap.$first=e===0;ap.$last=e===dl;ap.$map=dm.$map;ap.$remove=function(){return dm.removeAt(ap.$index)};return ap}var co=(function(){var e=[];var ap;return{begin:function(dl){e.push(ap);ap=dl},end:function(){ap=e.pop()},collectDependency:function(dm,dl){if(ap){ap.callback(dm,dl)}}}})();var bT=/^(duplex|on)$/;avalon.injectBinding=function(dn){var dl=dn.evaluator;if(dl){co.begin({callback:function(dr,e){ad(dr.$events[e._name],dn)}});try{var dq=bT.test(dn.type)?dn:dl.apply(0,dn.args);dn.handler(dq,dn.element,dn)}catch(dp){delete dn.evaluator;var dm=dn.element;if(dm.nodeType===3){var ap=dm.parentNode;if(au.commentInterpolate){ap.replaceChild(ct.createComment(dn.value),dm)}else{dm.data=cx+dn.value+bi}}}finally{co.end()}}};function ad(ap,e){e=e||bR[aD];if(ap&&e&&avalon.Array.ensure(ap,e)&&e.element){cp(e,ap)}}function cT(dp){if(dp&&dp.length){if(new Date()-bY>444&&typeof dp[0]==="object"){aV()}var ap=V.call(arguments,1);for(var dl=dp.length,dn;dn=dp[--dl];){var dm=dn.element;if(dm&&dm.parentNode){if(dn.$repeat){dn.handler.apply(dn,ap)}else{if(dn.type!=="on"){var e=dn.evaluator||l;dn.handler(e.apply(0,dn.args||[]),dm,dn)}}}}}}var c4=0;var cW=avalon.$$subscribers=[];var bY=new Date();var aH={};function L(e){return e.uniqueNumber||(e.uniqueNumber=++c4)}function cp(dm,dl){var ap=dm.element;if(!dm.uuid){if(ap.nodeType!==1){dm.uuid=dm.type+(dm.pos||0)+"-"+L(ap.parentNode)}else{dm.uuid=dm.name+"-"+L(ap)}}var e=dm.lists||(dm.lists=[]);avalon.Array.ensure(e,dl);dl.$uuid=dl.$uuid||bz();if(!cW[dm.uuid]){cW[dm.uuid]=1;cW.push(dm)}}function aV(dl){var dn=cW.length;var e=dn;var dp=[];var dm={};var ds={};while(dl=cW[--dn]){var dr=dl.type;if(ds[dr]){ds[dr]++}else{ds[dr]=1;dp.push(dr)}}var dt=false;dp.forEach(function(dv){if(aH[dv]!==ds[dv]){dm[dv]=1;dt=true}});dn=e;if(dt){while(dl=cW[--dn]){if(!dl.element){continue}if(dm[dl.type]&&g(dl.element)){cW.splice(dn,1);delete cW[dl.uuid];var du=dl.lists;for(var ap=0,dq;dq=du[ap++];){avalon.Array.remove(du,dq);avalon.Array.remove(dq,dl)}bO(dl)}}}aH=ds;bY=new Date()}function bO(ap){ap.element=null;ap.rollback&&ap.rollback();for(var e in ap){ap[e]=null}}function g(ap){try{if(!ap.parentNode){return true}}catch(dl){return true}return ap.msRetain?0:(ap.nodeType===1?!cX.contains(ap):!avalon.contains(cX,ap))}var bu={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:aN?[0,"",""]:[1,"X<div>","</div>"]};bu.th=bu.td;bu.optgroup=bu.option;bu.tbody=bu.tfoot=bu.colgroup=bu.caption=bu.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(bM,function(e){bu[e]=bu.g});var u=/<([\w:]+)/;var c3=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var bN=aN?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig;var cR=dc(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var bQ=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var bG=ct.createElement("script");var W=/<|&#?\w+;/;avalon.parseHTML=function(dq){var ds=b9.cloneNode(false);if(typeof dq!=="string"){return ds}if(!W.test(dq)){ds.appendChild(ct.createTextNode(dq));return ds}dq=dq.replace(c3,"<$1></$2>").trim();var dv=(u.exec(dq)||["",""])[1].toLowerCase(),ap=bu[dv]||bu._default,e=c9,dt,du;if(!aN){dq=dq.replace(bN,"<br class=msNoScope>$1")}e.innerHTML=ap[1]+dq+ap[2];var dn=e.getElementsByTagName("script");if(dn.length){for(var dp=0,dl;dl=dn[dp++];){if(cR[dl.type]){du=bG.cloneNode(false);cL.forEach.call(dl.attributes,function(dw){if(dw&&dw.specified){du[dw.name]=dw.value;du.setAttribute(dw.name,dw.value)}});du.text=dl.text;dl.parentNode.replaceChild(du,dl)}}}if(!aN){var dr=ap[1]==="X<div>"?e.lastChild.firstChild:e.lastChild;if(dr&&dr.tagName==="TABLE"&&dv!=="tbody"){for(dn=dr.childNodes,dp=0;dl=dn[dp++];){if(dl.tagName==="TBODY"&&!dl.innerHTML){dr.removeChild(dl);break}}}dn=e.getElementsByTagName("br");var dm=dn.length;while(dl=dn[--dm]){if(dl.className==="msNoScope"){dl.parentNode.removeChild(dl)}}for(dn=e.all,dp=0;dl=dn[dp++];){if(w(dl)){a2(dl)}}}for(dp=ap[0];dp--;e=e.lastChild){}while(dt=e.firstChild){ds.appendChild(dt)}return ds};function w(e){var ap=e.nodeName;return ap.toLowerCase()===ap&&e.scopeName&&e.outerText===""}function a2(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(dm,dl){if(!aN&&(!bN.test(dl)&&!bQ.test(dl))){try{dm.innerHTML=dl;return}catch(dn){}}var ap=this.parseHTML(dl);this.clearHTML(dm).appendChild(ap)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};function bq(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function m(e){if(!e||e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(ap){return ap.charAt(1).toUpperCase()})}var U={_toString:function(){var ap=this.node;var e=ap.className;var dl=typeof e==="string"?e:e.baseVal;return dl.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var ap=this.node;if(at.test(ap)){ap.setAttribute("class",e)}else{ap.className=e}}};function bj(ap){if(!("classList" in ap)){ap.classList={node:ap};for(var e in U){ap.classList[e.slice(1)]=U[e]}}return ap.classList}"add,remove".replace(bM,function(e){avalon.fn[e+"Class"]=function(ap){var dl=this[0];if(ap&&typeof ap==="string"&&dl&&dl.nodeType===1){ap.replace(/\S+/g,function(dm){bj(dl)[e](dm)})}return this}});avalon.fn.mix({hasClass:function(e){var ap=this[0]||{};return ap.nodeType===1&&bj(ap).contains(e)},toggleClass:function(dp,dl){var dm,ap=0;var dq=String(dp).split(/\s+/);var e=typeof dl==="boolean";while((dm=dq[ap++])){var dn=e?dl:!this.hasClass(dm);this[dn?"addClass":"removeClass"](dm)}return this},attr:function(e,ap){if(arguments.length===2){this[0].setAttribute(e,ap);return this}else{return this[0].getAttribute(e)}},data:function(ap,dl){ap="data-"+bq(ap||"");switch(arguments.length){case 2:this.attr(ap,dl);return this;case 1:var dm=this.attr(ap);return c6(dm);case 0:var e={};cL.forEach.call(this[0].attributes,function(dn){if(dn){ap=dn.name;if(!ap.indexOf("data-")){ap=m(ap.slice(5));e[ap]=c6(dn.value)}}});return e}},removeData:function(e){e="data-"+bq(e);this[0].removeAttribute(e);return this},css:function(ap,dm){if(avalon.isPlainObject(ap)){for(var dl in ap){avalon.css(this,dl,ap[dl])}}else{var e=avalon.css(this,ap,dm)}return e!==void 0?e:this},position:function(){var dl,dm,ap=this[0],e={top:0,left:0};if(!ap){return}if(this.css("position")==="fixed"){dm=ap.getBoundingClientRect()}else{dl=this.offsetParent();dm=this.offset();if(dl[0].tagName!=="HTML"){e=dl.offset()}e.top+=avalon.css(dl[0],"borderTopWidth",true);e.left+=avalon.css(dl[0],"borderLeftWidth",true);e.top-=dl.scrollTop();e.left-=dl.scrollLeft()}return{top:dm.top-e.top-avalon.css(ap,"marginTop",true),left:dm.left-e.left-avalon.css(ap,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||cX)},bind:function(dl,ap,e){if(this[0]){return avalon.bind(this[0],dl,ap,e)}},unbind:function(dl,ap,e){if(this[0]){avalon.unbind(this[0],dl,ap,e)}return this},val:function(dn){var dm=this[0];if(dm&&dm.nodeType===1){var ap=arguments.length===0;var e=ap?":get":":set";var dl=aO[cZ(dm)+e];if(dl){var dp=dl(dm,dn)}else{if(ap){return(dm.value||"").replace(/\r/g,"")}else{dm.value=dn}}}return ap?dp:this}});function c6(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:cq.test(ap)?avalon.parseJSON(ap):ap}catch(dl){}return ap}var cq=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,cc=/^[\],:{}\s]*$/,cf=/(?:^|:|,)(?:\s*\[)+/g,cB=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bS=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=b0.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(cc.test(e.replace(cB,"@").replace(bS,"]").replace(cf,""))){return(new Function("return "+e))()}}avalon.error("Invalid JSON: "+e)}return e};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ap,e){avalon.fn[ap]=function(dp){var dl=this[0]||{},dn=cm(dl),dm=ap==="scrollTop";if(!arguments.length){return dn?(e in dn)?dn[e]:cX[ap]:dl[ap]}else{if(dn){dn.scrollTo(!dm?dp:avalon(dn).scrollLeft(),dm?dp:avalon(dn).scrollTop())}else{dl[ap]=dp}}}});function cm(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var v=avalon.cssHooks={};var by=["","-webkit-","-o-","-moz-","-ms-"];var bP={"float":aN?"cssFloat":"styleFloat"};avalon.cssNumber=dc("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(e,dm,dl){if(bP[e]){return bP[e]}dm=dm||cX.style;for(var ap=0,dn=by.length;ap<dn;ap++){dl=m(by[ap]+e);if(dl in dm){return(bP[e]=dl)}}return null};v["@:set"]=function(dl,ap,dm){try{dl.style[ap]=dm}catch(dn){}};if(b0.getComputedStyle){v["@:get"]=function(dm,ap){if(!dm||!dm.style){throw new Error("getComputedStyle要求传入一个节点 "+dm)}var e,dl=getComputedStyle(dm,null);if(dl){e=ap==="filter"?dl.getPropertyValue(ap):dl[ap];if(e===""){e=dm.style[ap]}}return e};v["opacity:get"]=function(ap){var e=v["@:get"](ap,"opacity");return e===""?"1":e}}else{var ao=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var ch=/^(top|right|bottom|left)$/;var cb=/alpha\([^)]*\)/i;var T=!!b0.XDomainRequest;var dj="DXImageTransform.Microsoft.Alpha";var ae={thin:T?"1px":"2px",medium:T?"3px":"4px",thick:T?"5px":"6px"};v["@:get"]=function(dp,dm){var dl=dp.currentStyle;var ap=dl[dm];if((ao.test(ap)&&!ch.test(ap))){var dn=dp.style,dq=dn.left,e=dp.runtimeStyle.left;dp.runtimeStyle.left=dl.left;dn.left=dm==="fontSize"?"1em":(ap||0);ap=dn.pixelLeft+"px";dn.left=dq;dp.runtimeStyle.left=e}if(ap==="medium"){dm=dm.replace("Width","Style");if(dl[dm]==="none"){ap="0px"}}return ap===""?"auto":ae[ap]||ap};v["opacity:set"]=function(dn,ap,dp){var dm=dn.style;var e=isFinite(dp)&&dp<=1?"alpha(opacity="+dp*100+")":"";var dl=dm.filter||"";dm.zoom=1;dm.filter=(cb.test(dl)?dl.replace(cb,e):dl+" "+e).trim();if(!dm.filter){dm.removeAttribute("filter")}};v["opacity:get"]=function(e){var ap=e.filters.alpha||e.filters[dj],dl=ap&&ap.enabled?ap.opacity:100;return(dl/100)+""}}"top,left".replace(bM,function(e){v[e+":get"]=function(dl){var ap=v["@:get"](dl,e);return/px$/.test(ap)?ap:avalon(dl).position()[e]+"px"}});var b6={position:"absolute",visibility:"hidden",display:"block"};var S=/^(none|table(?!-c[ea]).+)/;function Y(dl,dn){if(dl.offsetWidth<=0){if(S.test(v["@:get"](dl,"display"))){var dm={node:dl};for(var e in b6){dm[e]=dl.style[e];dl.style[e]=b6[e]}dn.push(dm)}var ap=dl.parentNode;if(ap&&ap.nodeType===1){Y(ap,dn)}}}"Width,Height".replace(bM,function(dl){var dn=dl.toLowerCase(),ap="client"+dl,e="scroll"+dl,dm="offset"+dl;v[dn+":get"]=function(dr,ds,dq){var dt=-4;if(typeof dq==="number"){dt=dq}ds=dl==="Width"?["Left","Right"]:["Top","Bottom"];var dp=dr[dm];if(dt===2){return dp+avalon.css(dr,"margin"+ds[0],true)+avalon.css(dr,"margin"+ds[1],true)}if(dt<0){dp=dp-avalon.css(dr,"border"+ds[0]+"Width",true)-avalon.css(dr,"border"+ds[1]+"Width",true)}if(dt===-4){dp=dp-avalon.css(dr,"padding"+ds[0],true)-avalon.css(dr,"padding"+ds[1],true)}return dp};v[dn+"&get"]=function(dq){var dr=[];Y(dq,dr);var dt=v[dn+":get"](dq);for(var dp=0,ds;ds=dr[dp++];){dq=ds.node;for(var du in ds){if(typeof ds[du]==="string"){dq.style[du]=ds[du]}}}return dt};avalon.fn[dn]=function(dq){var dp=this[0];if(arguments.length===0){if(dp.setTimeout){return dp["inner"+dl]||dp.document.documentElement[ap]}if(dp.nodeType===9){var dr=dp.documentElement;return Math.max(dp.body[e],dr[e],dp.body[dm],dr[dm],dr[ap])}return v[dn+"&get"](dp)}else{return this.css(dn,dq)}};avalon.fn["inner"+dl]=function(){return v[dn+":get"](this[0],void 0,-2)};avalon.fn["outer"+dl]=function(dp){return v[dn+":get"](this[0],void 0,dp===true?2:0)}});avalon.fn.offset=function(){var ap=this[0],dn={left:0,top:0};if(!ap||!ap.tagName||!ap.ownerDocument){return dn}var dt=ap.ownerDocument,dp=dt.body,ds=dt.documentElement,dq=dt.defaultView||dt.parentWindow;if(!avalon.contains(ds,ap)){return dn}if(ap.getBoundingClientRect){dn=ap.getBoundingClientRect()}var dm=ds.clientTop||dp.clientTop,dr=ds.clientLeft||dp.clientLeft,e=Math.max(dq.pageYOffset||0,ds.scrollTop,dp.scrollTop),dl=Math.max(dq.pageXOffset||0,ds.scrollLeft,dp.scrollLeft);return{top:dn.top+e-dm,left:dn.left+dl-dr}};function cZ(ap){var e=ap.tagName.toLowerCase();return e==="input"&&/checkbox|radio/.test(ap.type)?"checked":e}var cP=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var aO={"option:get":bV?function(e){return cP.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,dr){var dl,dt=e.options,dn=e.selectedIndex,dp=aO["option:get"],dm=e.type==="select-one"||dn<0,ds=dm?null:[],dq=dm?dn+1:dt.length,ap=dn<0?dq:dm?dn:0;for(;ap<dq;ap++){dl=dt[ap];if((dl.selected||ap===dn)&&!dl.disabled){dr=dp(dl);if(dm){return dr}ds.push(dr)}}return ds},"select:set":function(dn,ap,dp){ap=[].concat(ap);var e=aO["option:get"];for(var dl=0,dm;dm=dn.options[dl++];){if((dm.selected=ap.indexOf(e(dm))>-1)){dp=true}}if(!dp){dn.selectedIndex=-1}}};var bw={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var ar=b0.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(ap){var dl=bw[ap];return typeof dl==="string"?dl:"\\u"+("0000"+ap.charCodeAt(0).toString(16)).slice(-4)})+'"'};var D=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");var cY=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var aU=/[^\w$]+/g;var ag=new RegExp(["\\b"+D.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var k=/\b\d[^,]*/g;var da=/^,+|,+$/g;var cl=new h(512);var aA=function(dm){var dl=","+dm.trim();var ap=cl.get(dl);if(ap){return ap}var e=dm.replace(cY,"").replace(aU,",").replace(ag,"").replace(k,"").replace(da,"").split(/^$|,+/);return cl.put(dl,cU(e))};function bI(ds,dt,ap,dm){var dr=[],dp=" = "+ap+".";var dq=/\$proxy\$each/.test(dt.$id);for(var dn=ds.length,e;e=ds[--dn];){var dl=dq&&dt.$map[e]?"el":e;if(dt.hasOwnProperty(dl)){dr.push(e+dp+dl);dm.vars.push(e);if(dm.type==="duplex"){ds.get=ap+"."+dl}ds.splice(dn,1)}}return dr}function cU(dp){var e=[],dm={};for(var ap=0;ap<dp.length;ap++){var dl=dp[ap];var dn=dl&&typeof dl.$id==="string"?dl.$id:dl;if(!dm[dn]){dm[dn]=e.push(dl)}}return e}var bg=new h(128);var c=/\w\[.*\]|\w\.\w/;var dd=/(\$proxy\$[a-z]+)\d+$/;var aK=/\)\s*$/;var bD=/\)\s*\|/g;var j=/\|\s*([$\w]+)/g;var b1=/"\s*\["/g;var G=/"\s*\(/g;function p(ap,e){e=e.replace(aK,"").replace(bD,function(){return"],|"}).replace(j,function(dm,dl){return"["+ar(dl)}).replace(b1,function(){return'"],["'}).replace(G,function(){return'",'})+"]";return"return avalon.filters.$filter("+ap+", "+e+")"}function b5(ap,du,dD){var dv=dD.type;var dp=dD.filters||"";var dC=du.map(function(e){return String(e.$id).replace(dd,"$1")})+ap+dv+dp;var ds=aA(ap).concat(),dq=[],dr=[],dm=[],dw="";du=cU(du);dD.vars=[];for(var dy=0,dA=du.length;dy<dA;dy++){if(ds.length){var dE="vm"+aD+"_"+dy;dr.push(dE);dm.push(du[dy]);dq.push.apply(dq,bI(ds,du[dy],dE,dD))}}if(!dq.length&&dv==="duplex"){return}if(dv!=="duplex"&&(ap.indexOf("||")>-1||ap.indexOf("&&")>-1)){dD.vars.forEach(function(e){var dF=new RegExp("\\b"+e+"(?:\\.\\w+|\\[\\w+\\])+","ig");ap=ap.replace(dF,function(dH){var dM=dH.charAt(e.length);var dJ=bV?ap.slice(arguments[1]+dH.length):RegExp.rightContext;var dL=/^\s*\(/.test(dJ);if(dM==="."||dM==="["||dL){var dG="var"+String(Math.random()).replace(/^0\./,"");if(dL){var dK=dH.split(".");if(dK.length>2){var dI=dK.pop();dq.push(dG+" = "+dK.join("."));return dG+"."+dI}else{return dH}}dq.push(dG+" = "+dH);return dG}else{return dH}})})}dD.args=dm;delete dD.vars;var dn=bg.get(dC);if(dn){dD.evaluator=dn;return}dw=dq.join(", ");if(dw){dw="var "+dw}if(/\S/.test(dp)){if(!/text|html/.test(dD.type)){throw Error("ms-"+dD.type+"不支持过滤器")}ap="\nvar ret"+aD+" = "+ap+";\r\n";ap+=p("ret"+aD,dp)}else{if(dv==="duplex"){var dl="'use strict';\nreturn function(vvv){\n\t"+dw+";\n\tif(!arguments.length){\n\t\treturn "+ap+"\n\t}\n\t"+(!c.test(ap)?ds.get:ap)+"= vvv;\n} ";try{dn=Function.apply(l,dr.concat(dl));dD.evaluator=bg.put(dC,dn)}catch(dB){ck("debug: parse error,"+dB.message)}return}else{if(dv==="on"){if(ap.indexOf("(")===-1){ap+=".call(this, $event)"}else{ap=ap.replace("(",".call(this,")}dr.push("$event");ap="\nreturn "+ap+";";var dz=ap.lastIndexOf("\nreturn");var dx=ap.slice(0,dz);var dt=ap.slice(dz);ap=dx+"\n"+dt}else{ap="\nreturn "+ap+";"}}}try{dn=Function.apply(l,dr.concat("'use strict';\n"+dw+ap));dD.evaluator=bg.put(dC,dn)}catch(dB){ck("debug: parse error,"+dB.message)}finally{ds=dq=dr=null}}function c5(ap,e,dl,dm,dn){if(Array.isArray(dm)){ap=dm.map(function(dp){return dp.expr?"("+dp.value+")":ar(dp.value)}).join(" + ")}b5(ap,e,dl);if(dl.evaluator&&!dn){dl.handler=aj[dl.handlerName||dl.type];avalon.injectBinding(dl)}}avalon.parseExprProxy=c5;avalon.scan=function(ap,dl){ap=ap||cX;var e=dl?[].concat(dl):[];bv(ap,e)};var a4=dc("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function f(e,dm,dl){var ap=setTimeout(function(){var dn=e.innerHTML;clearTimeout(ap);if(dn===dl){dm()}else{f(e,dm,dn)}})}function R(e,ap){var dl=e.getAttribute("avalonctrl")||ap.$id;e.setAttribute("avalonctrl",dl);ap.$events.expr=e.tagName+'[avalonctrl="'+dl+'"]'}var aR=function(dn,ap,e){var dp=dn.getAttribute(ap);if(dp){for(var dl=0,dm;dm=e[dl++];){if(dm.hasOwnProperty(dp)&&typeof dm[dp]==="function"){return dm[dp]}}}};function cJ(dm,e){for(var ap=0,dl;dl=dm[ap++];){dl.vmodels=e;db[dl.type](dl,e);if(dl.evaluator&&dl.element&&dl.element.nodeType===1){dl.element.removeAttribute(dl.name)}}dm.length=0}var aZ=bV&&b0.MutationObserver?function(dl){var ap=dl.firstChild,dm;while(ap){var e=ap.nextSibling;if(ap.nodeType===3){if(dm){dm.nodeValue+=ap.nodeValue;dl.removeChild(ap)}else{dm=ap}}else{dm=null}ap=e}}:0;var aW=/ms-(\w+)-?(.*)/;var P={"if":10,"repeat":90,"data":100,"widget":110,"each":1400,"with":1500,"duplex":2000,"on":3000};var c8=dc("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var cs=dc("value,title,alt,checked,selected,disabled,readonly,enabled");function J(ap,e){return ap.priority-e.priority}function bZ(dq,dm,dv){var dA=true;if(dm.length){var ds=M?M(dq):dq.attributes;var dl=[];var e=[];var dn={};for(var dt=0,dw;dw=ds[dt++];){if(dw.specified){if(dv=dw.name.match(aW)){var dy=dv[1];var dp=dv[2]||"";var dz=dw.value;var ap=dw.name;if(c8[dy]){dp=dy;dy="on"}else{if(cs[dy]){if(dy==="enabled"){ck("warning!ms-enabled或ms-attr-enabled已经被废弃");dy="disabled";dz="!("+dz+")"}dp=dy;dy="attr";ap="ms-"+dy+"-"+dp;e.push([dw.name,ap,dz])}}dn[ap]=dz;if(typeof db[dy]==="function"){var dx={type:dy,param:dp,element:dq,name:ap,value:dz,priority:(P[dy]||dy.charCodeAt(0)*10)+(Number(dp.replace(/\D/g,""))||0)};if(dy==="html"||dy==="text"){var dr=o(dz);avalon.mix(dx,dr);dx.filters=dx.filters.replace(df,function(){dx.type="html";dx.group=1;return""})}else{if(dy==="duplex"){var du=ap}else{if(ap==="ms-if-loop"){dx.priority+=100}}}dl.push(dx);if(dy==="widget"){dq.msData=dq.msData||dn}}}}}if(dl.length){dl.sort(J);e.forEach(function(dB){ck("warning!请改用"+dB[1]+"代替"+dB[0]+"!");dq.removeAttribute(dB[0]);dq.setAttribute(dB[1],dB[2])});if(du){if(dn["ms-attr-checked"]){ck("warning!一个控件不能同时定义ms-attr-checked与"+du)}if(dn["ms-attr-value"]){ck("warning!一个控件不能同时定义ms-attr-value与"+du)}}for(dt=0;dx=dl[dt];dt++){dy=dx.type;if(bf.test(dy)){return cJ(dl.slice(0,dt+1),dm)}else{if(dA){dA=!c7.test(dy)}}}cJ(dl,dm)}}if(dA&&!a4[dq.tagName]&&a3.test(dq.innerHTML.replace(c1,"<").replace(aq,">"))){aZ&&aZ(dq);aJ(dq,dm)}}var bf=/^if|widget|repeat$/;var c7=/^each|with|html|include$/;if(!"1"[0]){var cE=new h(512);var bC=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,b2=/^['"]/,bk=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,Q=/&amp;/g;var M=function(ap){var dn=ap.outerHTML;if(dn.slice(0,2)==="</"||!dn.trim()){return[]}var ds=dn.match(bk)[0];var dm=[],dp,dl,dt;var dq=cE.get(ds);if(dq){return dq}while(dl=bC.exec(ds)){dt=dl[2];if(dt){dt=(b2.test(dt)?dt.slice(1,-1):dt).replace(Q,"&")}var e=dl[1].toLowerCase();dp=e.match(aW);var dr={name:e,specified:true,value:dt||""};dm.push(dr)}return cE.put(ds,dm)}}function aJ(dl,ap){var e=avalon.slice(dl.childNodes);aP(e,ap)}function aP(e,ap){for(var dl=0,dm;dm=e[dl++];){aF(dm,dm.nodeType,ap)}}function aF(dl,e,ap){if(e===1){bv(dl,ap);if(dl.msCallback){dl.msCallback();dl.msCallback=void 0}}else{if(e===3&&ak.test(dl.data)){B(dl,ap)}else{if(au.commentInterpolate&&e===8&&!ak.test(dl.nodeValue)){B(dl,ap)}}}}function bv(dp,dm,dn){var ap=dp.getAttribute("ms-skip");if(!dp.getAttributeNode){return ck("warning "+dp.tagName+" no getAttributeNode method")}var e=dp.getAttributeNode("ms-important");var dr=dp.getAttributeNode("ms-controller");if(typeof ap==="string"){return}else{if(dn=e||dr){var dq=avalon.vmodels[dn.value];if(!dq){return}dm=dn===e?[dq]:[dq].concat(dm);var dl=dn.name;dp.removeAttribute(dl);avalon(dp).removeClass(dl);R(dp,dq)}}bZ(dp,dm)}var df=/\|\s*html\s*/,bs=/\|\|/g,c1=/&lt;/g,aq=/&gt;/g,a1=/(['"])(\\\1|.)+?\1/g;function o(dl,dm){if(dl.indexOf("|")>0){var e=dl.replace(a1,function(dn){return Array(dn.length+1).join("1")});var ap=e.replace(bs,"\u1122\u3344").indexOf("|");if(ap>-1){return{filters:dl.slice(ap),value:dl.slice(0,ap),pos:dm||0,expr:true}}}return{value:dl,filters:"",expr:true}}function cH(dm){var dl=[],ap,dn=0,e;do{e=dm.indexOf(cx,dn);if(e===-1){break}ap=dm.slice(dn,e);if(ap){dl.push({value:ap,filters:"",expr:false})}dn=e+cx.length;e=dm.indexOf(bi,dn);if(e===-1){break}ap=dm.slice(dn,e);if(ap){dl.push(o(ap,dn))}dn=e+bi.length}while(1);ap=dm.slice(dn);if(ap){dl.push({value:ap,expr:false,filters:""})}return dl}function B(dp,e){var dq=[];if(dp.nodeType===8){var dl=o(dp.nodeValue);var dn=[dl]}else{dn=cH(dp.data)}if(dn.length){for(var ap=0;dl=dn[ap++];){var dm=ct.createTextNode(dl.value);if(dl.expr){dl.type="text";dl.element=dm;dl.filters=dl.filters.replace(df,function(){dl.type="html";return""});dq.push(dl)}b9.appendChild(dm)}dp.parentNode.replaceChild(b9,dp);if(dq.length){cJ(dq,e)}}}var cM=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var y={};cM.replace(bM,function(e){y[e.toLowerCase()]=e});var bd={"accept-charset":"acceptCharset","char":"ch","charoff":"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var i=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");i.replace(bM,function(e){bd[e.toLowerCase()]=e});var aL=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var a0=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var ax=function(){return new (b0.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var aS=avalon.templateCache={};db.attr=function(dm,e){var dn=dm.value.trim(),dp=true;if(dn.indexOf(cx)>-1&&dn.indexOf(bi)>2){dp=false;if(ak.test(dn)&&RegExp.rightContext===""&&RegExp.leftContext===""){dp=true;dn=RegExp.$1}}if(dm.type==="include"){var dl=dm.element;dm.includeRendered=aR(dl,"data-include-rendered",e);dm.includeLoaded=aR(dl,"data-include-loaded",e);var ap=dm.includeReplace=!!avalon(dl).data("includeReplace");if(avalon(dl).data("includeCache")){dm.templateCache={}}dm.startInclude=ct.createComment("ms-include");dm.endInclude=ct.createComment("ms-include-end");if(ap){dm.element=dm.startInclude;dl.parentNode.insertBefore(dm.startInclude,dl);dl.parentNode.insertBefore(dm.endInclude,dl.nextSibling)}else{dl.insertBefore(dm.startInclude,dl.firstChild);dl.appendChild(dm.endInclude)}}dm.handlerName="attr";c5(dn,e,dm,(dp?0:cH(dm.value)))};aj.attr=function(dG,dy,dC){var dl=dC.type,dw=dC.param;if(dl==="css"){avalon(dy).css(dw,dG)}else{if(dl==="attr"){var dt=(dG===false)||(dG===null)||(dG===void 0);if(!aN&&bd[dw]){dw=bd[dw]}var dq=y[dw];if(typeof dy[dq]==="boolean"){dy[dq]=!!dG;if(!dG){dt=true}}if(dt){return dy.removeAttribute(dw)}var dr=at.test(dy)?false:(ct.namespaces&&w(dy))?true:dw in dy.cloneNode(false);if(dr){dy[dw]=dG}else{dy.setAttribute(dw,dG)}}else{if(dl==="include"&&dG){var dx=dC.vmodels;var dD=dC.includeRendered;var du=dC.includeLoaded;var dA=dC.includeReplace;var dB=dA?dy.parentNode:dy;var dz=function(dN){if(du){var dK=du.apply(dB,[dN].concat(dx));if(typeof dK==="string"){dN=dK
}}if(dD){f(dB,function(){dD.call(dB)},NaN)}var dL=dC.includeLastID;if(dC.templateCache&&dL&&dL!==dG){var dJ=dC.templateCache[dL];if(!dJ){dJ=dC.templateCache[dL]=ct.createElement("div");ay.appendChild(dJ)}}dC.includeLastID=dG;while(true){var dI=dC.startInclude.nextSibling;if(dI&&dI!==dC.endInclude){dB.removeChild(dI);if(dJ){dJ.appendChild(dI)}}else{break}}var dM=bA(dC,dG,dN);var dH=avalon.slice(dM.childNodes);dB.insertBefore(dM,dC.endInclude);aP(dH,dx)};if(dC.param==="src"){if(typeof aS[dG]==="string"){avalon.nextTick(function(){dz(aS[dG])})}else{if(Array.isArray(aS[dG])){aS[dG].push(dz)}else{var dn=ax();dn.onreadystatechange=function(){if(dn.readyState===4){var dI=dn.status;if(dI>=200&&dI<300||dI===304||dI===1223){var dK=dn.responseText;for(var dJ=0,dH;dH=aS[dG][dJ++];){dH(dK)}aS[dG]=dK}}};aS[dG]=[dz];dn.open("GET",dG,true);if("withCredentials" in dn){dn.withCredentials=true}dn.setRequestHeader("X-Requested-With","XMLHttpRequest");dn.send(null)}}}else{var ap=dG&&dG.nodeType===1?dG:ct.getElementById(dG);if(ap){if(ap.tagName==="NOSCRIPT"&&!(ap.innerHTML||ap.fixIE78)){dn=ax();dn.open("GET",location,false);dn.send(null);var dE=ct.getElementsByTagName("noscript");var dm=(dn.responseText||"").match(aL)||[];var ds=dm.length;for(var dv=0;dv<ds;dv++){var dF=dE[dv];if(dF){dF.style.display="none";dF.fixIE78=(dm[dv].match(a0)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){dz(ap.fixIE78||ap.value||ap.innerText||ap.innerHTML)})}}}else{if(!cX.hasAttribute&&typeof dG==="string"&&(dl==="src"||dl==="href")){dG=dG.replace(/&amp;/g,"&")}dy[dl]=dG;if(b0.chrome&&dy.tagName==="EMBED"){var dp=dy.parentNode;var e=document.createComment("ms-src");dp.replaceChild(e,dy);dp.replaceChild(dy,e)}}}}};function bA(e,dp,dm){var dn=e.templateCache&&e.templateCache[dp];if(dn){var dl=ct.createDocumentFragment(),ap;while(ap=dn.firstChild){dl.appendChild(ap)}return dl}return avalon.parseHTML(dm)}"title,alt,src,value,css,include,href".replace(bM,function(e){db[e]=db.attr});db["class"]=function(dp,e){var dl=dp.param,ds=dp.value,dn;dp.handlerName="class";if(!dl||isFinite(dl)){dp.param="";var ap=ds.replace(aI,function(dt){return dt.replace(/./g,"0")});var dq=ap.indexOf(":");if(dq===-1){var dr=ds}else{dr=ds.slice(0,dq);dn=ds.slice(dq+1);b5(dn,e,dp);if(!dp.evaluator){ck("debug: ms-class '"+(dn||"").trim()+"' 不存在于VM中");return false}else{dp._evaluator=dp.evaluator;dp._args=dp.args}}var dm=ak.test(dr);if(!dm){dp.immobileClass=dr}c5("",e,dp,(dm?cH(dr):0))}else{dp.immobileClass=dp.oldStyle=dp.param;c5(ds,e,dp)}};aj["class"]=function(dl,dm,dp){var ap=avalon(dm),e=dp.type;if(e==="class"&&dp.oldStyle){ap.toggleClass(dp.oldStyle,!!dl)}else{dp.toggleClass=dp._evaluator?!!dp._evaluator.apply(dm,dp._args):true;dp.newClass=dp.immobileClass||dl;if(dp.oldClass&&dp.newClass!==dp.oldClass){ap.removeClass(dp.oldClass)}dp.oldClass=dp.newClass;switch(e){case"class":ap.toggleClass(dp.newClass,dp.toggleClass);break;case"hover":case"active":if(!dp.hasBindEvent){var dn="mouseenter";var dt="mouseleave";if(e==="active"){dm.tabIndex=dm.tabIndex||-1;dn="mousedown";dt="mouseup";var ds=ap.bind("mouseleave",function(){dp.toggleClass&&ap.removeClass(dp.newClass)})}var dr=ap.bind(dn,function(){dp.toggleClass&&ap.addClass(dp.newClass)});var dq=ap.bind(dt,function(){dp.toggleClass&&ap.removeClass(dp.newClass)});dp.rollback=function(){ap.unbind("mouseleave",ds);ap.unbind(dn,dr);ap.unbind(dt,dq)};dp.hasBindEvent=true}break}}};"hover,active".replace(bM,function(e){db[e]=db["class"]});aj.data=function(dm,ap,dl){var e="data-"+dl.param;if(dm&&typeof dm==="object"){ap[e]=dm}else{ap.setAttribute(e,String(dm))}};var cO=db.duplex=function(dp,e){var dl=dp.element,ds;c5(dp.value,e,dp,0,1);dp.changed=aR(dl,"data-duplex-changed",e)||l;if(dp.evaluator&&dp.args){var dm=[];var dn=dc("string,number,boolean,checked");if(dl.type==="radio"&&dp.param===""){dp.param="checked"}if(dl.msData){dl.msData["ms-duplex"]=dp.value}dp.param.replace(/\w+/g,function(du){if(/^(checkbox|radio)$/.test(dl.type)&&/^(radio|checked)$/.test(du)){if(du==="radio"){ck("ms-duplex-radio已经更名为ms-duplex-checked")}du="checked";dp.isChecked=true}if(du==="bool"){du="boolean";ck("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(du==="text"){du="string";ck("ms-duplex-text已经更名为ms-duplex-string")}}if(dn[du]){ds=true}avalon.Array.ensure(dm,du)});if(!ds){dm.push("string")}dp.param=dm.join("-");dp.bound=function(dv,dw){if(dl.addEventListener){dl.addEventListener(dv,dw,false)}else{dl.attachEvent("on"+dv,dw)}var du=dp.rollback;dp.rollback=function(){dl.avalonSetter=null;avalon.unbind(dl,dv,dw);du&&du()}};for(var dq in avalon.vmodels){var dt=avalon.vmodels[dq];dt.$fire("avalon-ms-duplex-init",dp)}var dr=dp.pipe||(dp.pipe=a8);dr(null,dp,"init");var ap=dl.tagName;cO[ap]&&cO[ap](dl,dp.evaluator.apply(null,dp.args),dp)}};function aa(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(ap,e){return !e.element.oldValue}},string:{get:function(e){return e},set:aa},"boolean":{get:function(e){return e==="true"},set:aa},number:{get:function(dm,dl){var ap=parseFloat(dm);if(-dm===-ap){return ap}var e=/strong|medium|weak/.exec(dl.element.getAttribute("data-duplex-number"))||["medium"];switch(e[0]){case"strong":return 0;case"medium":return dm===""?"":0;case"weak":return dm}},set:aa}};function a8(dn,dl,ap,dm){dl.param.replace(/\w+/g,function(e){var dp=avalon.duplexHooks[e];if(dp&&typeof dp[ap]==="function"){dn=dp[ap](dn,dl)}});return dn}var K,cD=[];avalon.tick=function(e){if(cD.push(e)===1){K=setInterval(cr,60)}};function cr(){for(var ap=cD.length-1;ap>=0;ap--){var e=cD[ap];if(e()===false){cD.splice(ap,1)}}if(!cD.length){clearInterval(K)}}var bc=l;var cQ=/text|password|hidden/;new function(){try{var dl={};var dq=HTMLInputElement.prototype;var dn=HTMLTextAreaElement.prototype;function ap(e){if(avalon.contains(cX,this)){dl[this.tagName].call(this,e);if(!cQ.test(this.type)){return}if(!this.msFocus&&this.avalonSetter){this.avalonSetter()}}}var dp=HTMLInputElement.prototype;Object.getOwnPropertyNames(dp);dl["INPUT"]=Object.getOwnPropertyDescriptor(dq,"value").set;Object.defineProperty(dq,"value",{set:ap});dl["TEXTAREA"]=Object.getOwnPropertyDescriptor(dn,"value").set;Object.defineProperty(dn,"value",{set:ap})}catch(dm){bc=avalon.tick}};if(bV){avalon.bind(ct,"selectionchange",function(dl){var ap=ct.activeElement;if(ap&&typeof ap.avalonSetter==="function"){ap.avalonSetter()}})}cO.INPUT=function(dp,dq,dn){var dt=dp.type,dl=dn.bound,e=avalon(dp),dv=false;function dw(dy){dn.changed.call(this,dy,dn)}function ap(){dv=true}function ds(){dv=false}var du=function(){if(dv){return}var dz=dp.oldValue=dp.value;var dy=dn.pipe(dz,dn,"get");if(e.data("duplexObserve")!==false){dq(dy);dw.call(dp,dy);if(e.data("duplex-focus")){avalon.nextTick(function(){dp.focus()})}}};dn.handler=function(){var dy=dn.pipe(dq(),dn,"set")+"";if(dy!==dp.oldValue){dp.value=dy}};if(dn.isChecked||dt==="radio"){var dr=bV===6;du=function(){if(e.data("duplexObserve")!==false){var dy=dn.pipe(dp.value,dn,"get");dq(dy);dw.call(dp,dy)}};dn.handler=function(){var dz=dq();var dy=dn.isChecked?!!dz:dz+""===dp.value;dp.oldValue=dy;if(dr){setTimeout(function(){dp.defaultChecked=dy;dp.checked=dy},31)}else{dp.checked=dy}};dl("click",du)}else{if(dt==="checkbox"){du=function(){if(e.data("duplexObserve")!==false){var dz=dp.checked?"ensure":"remove";var dy=dq();if(!Array.isArray(dy)){ck("ms-duplex应用于checkbox上要对应一个数组");dy=[dy]}avalon.Array[dz](dy,dn.pipe(dp.value,dn,"get"));dw.call(dp,dy)}};dn.handler=function(){var dy=[].concat(dq());dp.checked=dy.indexOf(dn.pipe(dp.value,dn,"get"))>-1};dl(aN?"change":"click",du)}else{var dx=dp.getAttribute("data-duplex-event")||"input";if(dp.attributes["data-event"]){ck("data-event指令已经废弃，请改用data-duplex-event")}function dm(dy){setTimeout(function(){du(dy)})}dx.replace(bM,function(dy){switch(dy){case"input":if(!bV){dl("input",du);dl("compositionstart",ap);dl("compositionend",ds);dl("DOMAutoComplete",du)}else{if(bV>8){dl("input",du)}else{dl("propertychange",function(dz){if(dz.propertyName==="value"){du()}})}dl("dragend",dm)}break;default:dl(dy,du);break}});dl("focus",function(){dp.msFocus=true});dl("blur",function(){dp.msFocus=false});if(cQ.test(dt)){bc(function(){if(cX.contains(dp)){if(!dp.msFocus&&dp.oldValue!==dp.value){du()}}else{if(!dp.msRetain){return false}}})}dp.avalonSetter=du}}dp.oldValue=dp.value;avalon.injectBinding(dn);dw.call(dp,dp.value)};cO.TEXTAREA=cO.INPUT;cO.SELECT=function(dl,dn,dm){var ap=avalon(dl);function e(){if(ap.data("duplexObserve")!==false){var dp=ap.val();if(Array.isArray(dp)){dp=dp.map(function(dq){return dm.pipe(dq,dm,"get")})}else{dp=dm.pipe(dp,dm,"get")}if(dp+""!==dl.oldValue){dn(dp)}dm.changed.call(dl,dp,dm)}}dm.handler=function(){var dp=dn();dp=dp&&dp.$model||dp;if(Array.isArray(dp)){if(!dl.multiple){ck("ms-duplex在<select multiple=true>上要求对应一个数组")}}else{if(dl.multiple){ck("ms-duplex在<select multiple=false>不能对应一个数组")}}dp=Array.isArray(dp)?dp.map(String):dp+"";if(dp+""!==dl.oldValue){ap.val(dp);dl.oldValue=dp+""}};dm.bound("change",e);dl.msCallback=function(){avalon.injectBinding(dm);dm.changed.call(dl,dn(),dm)}};aj.html=function(ap,dn,dp){var ds=dn.nodeType!==1;var dt=ds?dn.parentNode:dn;if(!dt){return}ap=ap==null?"":ap;if(dp.oldText!==ap){dp.oldText=ap}else{return}if(dn.nodeType===3){var dl=bz("html");dt.insertBefore(ct.createComment(dl),dn);dp.element=ct.createComment(dl+":end");dt.replaceChild(dp.element,dn);dn=dp.element}if(typeof ap!=="object"){var dq=avalon.parseHTML(String(ap))}else{if(ap.nodeType===11){dq=ap}else{if(ap.nodeType===1||ap.item){var e=ap.nodeType===1?ap.childNodes:ap.item;dq=b9.cloneNode(true);while(e[0]){dq.appendChild(e[0])}}}}e=avalon.slice(dq.childNodes);if(ds){var dr=dn.nodeValue.slice(0,-4);while(true){var dm=dn.previousSibling;if(!dm||dm.nodeType===8&&dm.nodeValue===dr){break}else{dt.removeChild(dm)}}dt.insertBefore(dq,dn)}else{avalon.clearHTML(dn).appendChild(dq)}aP(e,dp.vmodels)};db["if"]=db.data=db.text=db.html=function(ap,e){c5(ap.value,e,ap)};aj["if"]=function(dp,dl,dm){try{if(!dl.parentNode){return}}catch(dn){return}if(dp){if(dl.nodeType===8){dl.parentNode.replaceChild(dm.template,dl);dl=dm.element=dm.template}if(dl.getAttribute(dm.name)){dl.removeAttribute(dm.name);bZ(dl,dm.vmodels)}dm.rollback=null}else{if(dl.nodeType===1){var ap=dm.element=ct.createComment("ms-if");dl.parentNode.replaceChild(ap,dl);dm.template=dl;ay.appendChild(dl);dm.rollback=function(){if(dl.parentNode===ay){ay.removeChild(dl)}}}}};var bx=/\(([^)]*)\)/;db.on=function(dn,ap){var dm=dn.value;dn.type="on";var dl=dn.param.replace(/-\d+$/,"");if(typeof db.on[dl+"Hook"]==="function"){db.on[dl+"Hook"](dn)}if(dm.indexOf("(")>0&&dm.indexOf(")")>-1){var e=(dm.match(bx)||["",""])[1].trim();if(e===""||e==="$event"){dm=dm.replace(bx,"")}}c5(dm,ap,dn)};aj.on=function(dn,dl,dm){dn=function(dq){var dp=dm.evaluator||l;return dp.apply(this,dm.args.concat(dq))};var e=dm.param.replace(/-\d+$/,"");if(e==="scan"){dn.call(dl,{type:e})}else{if(typeof dm.specialBind==="function"){dm.specialBind(dl,dn)}else{var ap=avalon.bind(dl,e,dn)}}dm.rollback=function(){if(typeof dm.specialUnbind==="function"){dm.specialUnbind()}else{avalon.unbind(dl,e,ap)}}};db.repeat=function(dH,dE){var dn=dH.type;c5(dH.value,dE,dH,0,1);var dq=false;try{var dz=dH.$repeat=dH.evaluator.apply(0,dH.args||[]);var dr=avalon.type(dz);if(dr!=="object"&&dr!=="array"){dq=true;avalon.log("warning:"+dH.value+"只能是对象或数组")}}catch(dF){dq=true}var ap=dH.value.split(".")||[];if(ap.length>1){ap.pop();var dB=ap[0];for(var dD=0,dy;dy=dE[dD++];){if(dy&&dy.hasOwnProperty(dB)){var dm=dy[dB].$events||{};dm[cC]=dm[cC]||[];dm[cC].push(dH);break}}}var dG=dH.element;if(dG.nodeType===1){dG.removeAttribute(dH.name);dH.sortedCallback=aR(dG,"data-with-sorted",dE);dH.renderedCallback=aR(dG,"data-"+dn+"-rendered",dE);var dA=bz(dn);var ds=ct.createComment(dA);var dp=ct.createComment(dA+":end");dH.signature=dA;dH.template=b9.cloneNode(false);if(dn==="repeat"){var dv=dG.parentNode;dv.replaceChild(dp,dG);dv.insertBefore(ds,dp);dH.template.appendChild(dG)}else{while(dG.firstChild){dH.template.appendChild(dG.firstChild)}dG.appendChild(ds);dG.appendChild(dp)}dH.element=dp;dH.handler=aj.repeat;dH.rollback=function(){var e=dH.element;if(!e){return}dH.handler("clear")}}if(dq){return}dH.$outer={};var dx="$key";var dw="$val";if(Array.isArray(dz)){if(!dz.$map){dz.$map={el:1};var dC=dz.length;var du=[];for(dD=0;dD<dC;dD++){du.push(bL(dD,dz))}dz.$proxy=du}dz.$map[dH.param||"el"]=1;dx="$first";dw="$last"}for(dD=0;dy=dE[dD++];){if(dy.hasOwnProperty(dx)&&dy.hasOwnProperty(dw)){dH.$outer=dy;break}}var dt=dz.$events;var dl=(dt||{})[cC];ad(dl,dH);if(dr==="object"){dH.$with=true;dz.$proxy||(dz.$proxy={});dH.handler("append",dz)}else{if(dz.length){dH.handler("add",0,dz.length)}}};aj.repeat=function(dn,ds,dl){if(dn){var dH=this,dq,e;var dp=dH.element;var du=dg(dH);var dv=dp.parentNode;var dE=b9.cloneNode(false);switch(dn){case"add":var dz=ds+dl;var dJ=[];var dt=dH.$repeat;for(var dC=ds;dC<dz;dC++){var dB=dt.$proxy[dC];dB.$outer=dH.$outer;a7(dH,dE,dB,dJ)}dv.insertBefore(dE,du[ds]||dp);for(dC=0;e=dJ[dC++];){aP(e.nodes,e.vmodels);e.nodes=e.vmodels=null}break;case"del":cz(du[ds],du[ds+dl]||dp);break;case"clear":dq=du[0];if(dq){cz(dq,dp)}break;case"move":dq=du[0];if(dq){var dy=dq.nodeValue;var dF=[];var dD=[],dA;cz(dq,dp,function(){dD.unshift(this);if(this.nodeValue===dy){dF.unshift(dD);dD=[]}});be(dF,ds);while(dD=dF.shift()){while(dA=dD.shift()){dE.appendChild(dA)}}dv.insertBefore(dE,dp)}break;case"append":var dG=ds;var dx=dG.$proxy;var dw=[];dJ=[];for(var dI in dx){if(!dG.hasOwnProperty(dI)){d(dx[dI],aw);delete (dx[dI])}}for(dI in dG){if(dG.hasOwnProperty(dI)&&dI!=="hasOwnProperty"&&dI!=="$proxy"){dw.push(dI)}}if(dH.sortedCallback){var ap=dH.sortedCallback.call(dv,dw);if(ap&&Array.isArray(ap)&&ap.length){dw=ap}}for(dC=0;dI=dw[dC++];){if(dI!=="hasOwnProperty"){dx[dI]=br(dx[dI],dI,dH);a7(dH,dE,dx[dI],dJ)}}dv.insertBefore(dE,dp);for(dC=0;e=dJ[dC++];){aP(e.nodes,e.vmodels);e.nodes=e.vmodels=null}break}if(dn==="clear"){dn="del"}var dr=dH.renderedCallback||l,dm=arguments;f(dv,function(){dr.apply(dv,dm);if(dv.oldValue&&dv.tagName==="SELECT"){avalon(dv).val(dv.oldValue.split(","))}},NaN)}};"with,each".replace(bM,function(e){db[e]=db.repeat});avalon.pool=aM;function a7(dr,dp,dn,e){var dq=dr.template.cloneNode(true);var dl=avalon.slice(dq.childNodes);if(!dr.$with){dq.insertBefore(ct.createComment(dr.signature),dq.firstChild)}dp.appendChild(dq);var ap=[dn].concat(dr.vmodels);var dm={nodes:dl,vmodels:ap};e.push(dm)}function dg(dm){var ap=dm.element;var e=ap.nodeValue.replace(":end","");var dl=ap.previousSibling;var dn=[];while(dl){if(dl.nodeValue===e){dn.unshift(dl)}dl=dl.previousSibling}return dn}function cz(dm,e,dl){while(true){var ap=e.previousSibling;if(!ap){break}ap.parentNode.removeChild(ap);dl&&dl.call(ap);if(ap===dm){break}}}var aw=[];function aY(){var e=ce({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(ap){this.$host[this.$key]=ap}}},{$val:1});e.$id=bz("$proxy$with");return e}function br(ap,e,dm){ap=ap||aw.pop();if(!ap){ap=aY()}var dl=dm.$repeat;ap.$key=e;ap.$host=dl;ap.$outer=dm.$outer;if(dl.$events){ap.$events.$val=dl.$events[e]}else{ap.$events={}}return ap}function Z(e){e.forEach(function(ap){d(ap,aM)});e.length=0}function d(dl,e){for(var ap in dl.$events){if(Array.isArray(dl.$events[ap])){dl.$events[ap].forEach(function(dm){if(typeof dm==="object"){bO(dm)}});dl.$events[ap].length=0}}dl.$host=dl.$outer={};if(e.unshift(dl)>au.maxRepeatSize){e.pop()}}aj.text=function(dm,ap){dm=dm==null?"":dm;if(ap.nodeType===3){try{ap.data=dm}catch(dl){}}else{if("textContent" in ap){ap.textContent=dm}else{ap.innerText=dm}}};function aB(dm,dl){var e="_"+dm;if(!aB[e]){var ap=ct.createElement(dm);cX.appendChild(ap);if(aN){dl=getComputedStyle(ap,null).display}else{dl=ap.currentStyle.display}cX.removeChild(ap);aB[e]=dl}return aB[e]}avalon.parseDisplay=aB;db.visible=function(dn,ap){var dm=avalon(dn.element);var dp=dm.css("display");if(dp==="none"){var dl=dm[0].style;var e=/visibility/i.test(dl.cssText);var dq=dm.css("visibility");dl.display="";dl.visibility="hidden";dp=dm.css("display");if(dp==="none"){dp=aB(dm[0].nodeName)}dl.visibility=e?dq:""}dn.display=dp;c5(dn.value,ap,dn)};aj.visible=function(dl,e,ap){e.style.display=dl?ap.display:"none"};db.widget=function(dr,dm){var dv=dr.value.match(bM);var dn=dr.element;var ds=dv[0];var dl=dv[1];if(!dl||dl==="$"){dl=bz(ds)}var dy=dv[2]||ds;var dp=avalon.ui[ds];if(typeof dp==="function"){dm=dn.vmodels||dm;for(var dq=0,dx;dx=dm[dq++];){if(dx.hasOwnProperty(dy)&&typeof dx[dy]==="object"){var ap=dx[dy];ap=ap.$model||ap;break}}if(ap){var dA=ap[ds+"Id"];if(typeof dA==="string"){ck("warning!不再支持"+ds+"Id");dl=dA}}var dw=avalon.getWidgetData(dn,ds);dr.value=[ds,dl,dy].join(",");dr[ds+"Id"]=dl;dr.evaluator=l;dn.msData["ms-widget-id"]=dl;var dz=dr[ds+"Options"]=avalon.mix({},dp.defaults,ap||{},dw);dn.removeAttribute("ms-widget");var du=dp(dn,dr,dm)||{};if(du.$id){avalon.vmodels[dl]=du;R(dn,du);try{du.$init(function(){avalon.scan(dn,[du].concat(dm));if(typeof dz.onInit==="function"){dz.onInit.call(dn,du,dz,dm)}})}catch(dt){}dr.rollback=function(){try{du.widgetElement=null;du.$remove()}catch(dB){}dn.msData={};delete avalon.vmodels[du.$id]};cp(dr,bm);if(b0.chrome){dn.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(aV)})}}else{avalon.scan(dn,dm)}}else{if(dm.length){dn.vmodels=dm}}};var bm=[];var x=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var bX=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var aQ=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var cN={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var cj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var a5=/([^\#-~| |!])/g;function n(dn,dl,dr,dq){dn=(dn+"").replace(/[^0-9+\-Ee.]/g,"");var ap=!isFinite(+dn)?0:+dn,e=!isFinite(+dl)?3:Math.abs(dl),dt=dq||",",dm=dr||".",ds="",dp=function(dw,dv){var du=Math.pow(10,dv);return""+(Math.round(dw*du)/du).toFixed(dv)};ds=(e?dp(ap,e):""+Math.round(ap)).split(".");if(ds[0].length>3){ds[0]=ds[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,dt)}if((ds[1]||"").length<e){ds[1]=ds[1]||"";ds[1]+=new Array(e-ds[1].length+1).join("0")}return ds.join(dm)}var bb=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(dl,ap,e){ap=ap||30;e=typeof e==="string"?e:"...";return dl.length>ap?dl.slice(0,ap-e.length)+e:String(dl)},$filter:function(dm){for(var ap=1,dp=arguments.length;ap<dp;ap++){var dn=arguments[ap];var dl=avalon.filters[dn.shift()];if(typeof dl==="function"){var e=[dm].concat(dn);dm=dl.apply(null,e)}}return dm},camelize:m,sanitize:function(e){return e.replace(x,"").replace(aQ,function(dl,ap){var dm=dl.toLowerCase().match(/<(\w+)\s/);if(dm){var dn=cN[dm[1]];if(dn){dl=dl.replace(dn,function(dr,dq,ds){var dp=ds.charAt(0);return dq+"="+dp+"javascript:void(0)"+dp})}}return dl.replace(bX," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(cj,function(dm){var dl=dm.charCodeAt(0);var ap=dm.charCodeAt(1);return"&#"+(((dl-55296)*1024)+(ap-56320)+65536)+";"}).replace(a5,function(ap){return"&#"+ap.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,ap,dl){return(ap||"\uFFE5")+n(e,isFinite(dl)?dl:2)},number:n};new function(){function dm(du){return parseInt(du,10)||0}function dn(dv,dw,du){var dx="";if(dv<0){dx="-";dv=-dv}dv=""+dv;while(dv.length<dw){dv="0"+dv}if(du){dv=dv.substr(dv.length-dw)}return dx+dv}function dr(dv,dw,dx,du){return function(dy){var dz=dy["get"+dv]();if(dx>0||dz>-dx){dz+=dx}if(dz===0&&dx===-12){dz=12}return dn(dz,dw,du)}}function ap(dv,du){return function(dy,dw){var dz=dy["get"+dv]();var dx=(du?("SHORT"+dv):dv).toUpperCase();return dw[dx][dz]}}function dt(dv){var du=-1*dv.getTimezoneOffset();var dw=(du>=0)?"+":"";dw+=dn(Math[du>0?"floor":"ceil"](du/60),2)+dn(Math.abs(du%60),2);return dw}function dq(dv,du){return dv.getHours()<12?du.AMPMS[0]:du.AMPMS[1]}var dp={yyyy:dr("FullYear",4),yy:dr("FullYear",2,0,true),y:dr("FullYear",1),MMMM:ap("Month"),MMM:ap("Month",true),MM:dr("Month",2,1),M:dr("Month",1,1),dd:dr("Date",2),d:dr("Date",1),HH:dr("Hours",2),H:dr("Hours",1),hh:dr("Hours",2,-12),h:dr("Hours",1,-12),mm:dr("Minutes",2),m:dr("Minutes",1),ss:dr("Seconds",2),s:dr("Seconds",1),sss:dr("Milliseconds",3),EEEE:ap("Day"),EEE:ap("Day",true),a:dq,Z:dt};var e=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var dl=/^\/Date\((\d+)\)\/$/;bb.date=function(dv,dD){var dH=bb.date.locate,dF="",dx=[],dC,dy;dD=dD||"mediumDate";dD=dH[dD]||dD;if(typeof dv==="string"){if(/^\d+$/.test(dv)){dv=dm(dv)}else{if(dl.test(dv)){dv=+RegExp.$1}else{var dw=dv.trim();var du=[0,0,0,0,0,0,0];var dG=new Date(0);dw=dw.replace(/^(\d+)\D(\d+)\D(\d+)/,function(dK,dJ,dI,dM){var dL=dM.length===4?[dM,dJ,dI]:[dJ,dI,dM];du[0]=dm(dL[0]);du[1]=dm(dL[1])-1;du[2]=dm(dL[2]);return""});var dA=dG.setFullYear;var dE=dG.setHours;dw=dw.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(dK,dJ,dI,dM,dL){du[3]=dm(dJ);du[4]=dm(dI);du[5]=dm(dM);if(dL){du[6]=Math.round(parseFloat("0."+dL)*1000)}return""});var dB=0;var dz=0;dw=dw.replace(/Z|([+-])(\d\d):?(\d\d)/,function(dK,dI,dL,dJ){dA=dG.setUTCFullYear;dE=dG.setUTCHours;if(dI){dB=dm(dI+dL);dz=dm(dI+dJ)}return""});du[3]-=dB;du[4]-=dz;dA.apply(dG,du.slice(0,3));dE.apply(dG,du.slice(3));dv=dG}}}if(typeof dv==="number"){dv=new Date(dv)}if(avalon.type(dv)!=="date"){return}while(dD){dy=e.exec(dD);if(dy){dx=dx.concat(dy.slice(1));dD=dx.pop()}else{dx.push(dD);dD=null}}dx.forEach(function(dI){dC=dp[dI];dF+=dC?dC(dv,dH):dI.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return dF};var ds={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};ds.SHORTMONTH=ds.MONTH;bb.date.locate=ds};var cG=avalon.modules={"domReady!":{exports:avalon,state:3},"avalon":{exports:avalon,state:4}};cG.exports=cG.avalon;new function(){var dT=[];var du=[];var dU=/\.js$/i;function ds(dX,dW){var dY="js";dX=dX.replace(/^(\w+)\!/,function(d4,d3){dY=d3;return""});if(dY==="ready"){ck("debug: ready!已经被废弃，请使用domReady!");dY="domReady"}var d1="";dX=dX.replace(dP,function(d3){d1=d3;return""});var d2="."+dY;var dZ=/js|css/.test(d2)?d2:"";dX=dX.replace(/\.[a-z0-9]+$/g,function(d3){if(d3===d2){dZ=d3;return""}else{return d3}});var d0=avalon.mix({query:d1,ext:dZ,res:dY,name:dX,toUrl:dM},dW);d0.toUrl(dX);return d0}function dR(d1){var dX=d1.name;var dZ=d1.res;var dY=cG[dX];var dW=dX&&d1.urlNoQuery;if(dY&&dY.state>=1){return dX}dY=cG[dW];if(dY&&dY.state>=3){q(dY.deps||[],dY.factory,dW);return dW}if(dX&&!dY){dY=cG[dW]={id:dW,state:1};var d0=function(d2){dq[dZ]=d2;d2.load(dX,d1,function(d3){if(arguments.length&&d3!==void 0){dY.exports=d3}dY.state=4;dS()})};if(!dq[dZ]){q([dZ],d0)}else{d0(dq[dZ])}}return dX?dW:dZ+"!"}var dD=[];var dJ=false;q=avalon.require=function(d2,d0,dW,d5){if(!dJ){dD.push(avalon.slice(arguments));if(arguments.length<=2){dJ=true;var d1=dD.splice(0,dD.length),d3;while(d3=d1.shift()){q.apply(null,d3)}}return}if(!Array.isArray(d2)){avalon.error("require方法的第一个参数应为数组 "+d2)}var d6=[];var d7={};var dY=dW||"callback"+setTimeout("1");d5=d5||{};d5.baseUrl=au.baseUrl;var dX=!!d5.built;if(dW){d5.parentUrl=dW.substr(0,dW.lastIndexOf("/"));d5.mapUrl=dW.replace(dU,"")}if(dX){var d4=ds(d5.defineName,d5);dY=d4.urlNoQuery}else{d2.forEach(function(d9){var ea=ds(d9,d5);var d8=dR(ea);if(d8){if(!d7[d8]){d6.push(d8);d7[d8]="司徒正美"}}})}var dZ=cG[dY];if(!dZ||dZ.state!==4){cG[dY]={id:dY,deps:dX?d2.concat():d6,factory:d0||l,state:3}}if(!dZ){dT.push(dY)}dS()};q.define=function(d0,d2,dW){if(typeof d0!=="string"){dW=d2;d2=d0;d0="anonymous"}if(!Array.isArray(d2)){dW=d2;d2=[]}var dZ={built:!dJ,defineName:d0};var dY=[d2,dW,dZ];dW.require=function(d3){dY.splice(2,0,d3);if(cG[d3]){cG[d3].state=3;var d4=false;try{d4=dQ(cG[d3].deps,d3)}catch(d5){}if(d4){avalon.error(d3+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+d3+"模块")}}delete dW.require;q.apply(null,dY)};var dX=dZ.built?"unknown":dC();if(dX){var d1=cG[dX];if(d1){d1.state=2}dW.require(dX)}else{du.push(dW)}};q.config=au;q.define.amd=cG;var dn=au["orig.paths"]={};var dp=au["orig.map"]={};var dA=au["packages"]=[];var dr=au["orig.args"]={};avalon.mix(dh,{paths:function(dW){avalon.mix(dn,dW);au.paths=dm(dn)},map:function(dX){avalon.mix(dp,dX);var dW=dm(dp,1,1);avalon.each(dW,function(dY,dZ){dZ.val=dm(dZ.val)});au.map=dW},packages:function(d2){d2=d2.concat(dA);var d1={};var dZ=[];for(var d0=0,dY;dY=d2[d0++];){dY=typeof dY==="string"?{name:dY}:dY;var dX=dY.name;if(!d1[dX]){var dW=dy(dY.location||dX,dY.main||"main");dW=dW.replace(dU,"");dZ.push(dY);d1[dX]=dY.location=dW;dY.reg=dl(dX)}}au.packages=dZ.sort()},urlArgs:function(dW){if(typeof dW==="string"){dW={"*":dW}}avalon.mix(dr,dW);au.urlArgs=dm(dr,1)},baseUrl:function(dW){if(!dt(dW)){var dX=b.getElementsByTagName("base")[0];if(dX){b.removeChild(dX)}var dY=ct.createElement("a");dY.href=dW;dW=dN(dY,"href");if(dX){b.insertBefore(dX,b.firstChild)}}if(dW.length>3){au.baseUrl=dW}},shim:function(dY){for(var dW in dY){var dX=dY[dW];if(Array.isArray(dX)){dX=dY[dW]={deps:dX}}if(!dX.exportsFn&&(dX.exports||dX.init)){dX.exportsFn=dV(dX)}}au.shim=dY}});function dQ(dY,dW){for(var dX=0,dZ;dZ=dY[dX++];){if(cG[dZ].state!==4&&(dZ===dW||dQ(cG[dZ].deps,dW))){return true}}}function dF(dX,dW,dY){var dZ=dI(dX.src);dX.onload=dX.onreadystatechange=dX.onerror=null;if(dW||(dY&&cG[dZ]&&!cG[dZ].state)){setTimeout(function(){b.removeChild(dX);dX=null});ck("debug: 加载 "+dZ+" 失败"+dW+" "+(!cG[dZ].state))}else{return true}}function dS(){loop:for(var dY=dT.length,d1;d1=dT[--dY];){var dZ=cG[d1],d0=dZ.deps;if(!d0){continue}for(var dW=0,dX;dX=d0[dW];dW++){if(Object(cG[dX]).state!==4){continue loop}}if(dZ.state!==4){dT.splice(dY,1);dv(dZ.id,dZ.deps,dZ.factory);dS()}}}var dH=/complete|loaded/;function dK(dW,dX,d4){var dY=ct.createElement("script");dY.className=cC;var d2="onload" in dY;var d3=d2?"onload":"onreadystatechange";function dZ(){var d5=du.pop();d5&&d5.require(dX);if(d4){d4()}if(dF(dY,false,!d2)){ck("debug: 已成功加载 "+dW);dX&&dT.push(dX);dS()}}var d1=0,d0;dY[d3]=d2?dZ:function(){if(dH.test(dY.readyState)){++d1;if(d1===1){d0=setTimeout(dZ,500)}else{clearTimeout(d0);dZ()}}};dY.onerror=function(){dF(dY,true)};b.insertBefore(dY,b.firstChild);dY.src=dW;ck("debug: 正准备加载 "+dW)}var dq=q.plugins={ready:{load:l},js:{load:function(dX,dZ,dY){var dW=dZ.url;var d1=dZ.urlNoQuery;var d0=au.shim[dX.replace(dU,"")];if(d0){q(d0.deps||[],function(){var d2=avalon.slice(arguments);dK(dW,d1,function(){dY(d0.exportsFn?d0.exportsFn.apply(0,d2):void 0)})})}else{dK(dW,d1)}}},css:{load:function(dX,d0,dY){var dW=d0.url;var dZ=ct.createElement("link");dZ.rel="stylesheet";dZ.href=dW;b.insertBefore(dZ,b.firstChild);ck("debug: 已成功加载 "+dW);dY()}},text:{load:function(dX,d0,dZ){var dW=d0.url;var d2=ax();d2.onreadystatechange=function(){if(d2.readyState===4){var d3=d2.status;if(d3>399&&d3<600){avalon.error(dW+" 对应资源不存在或没有开启 CORS")}else{ck("debug: 已成功加载 "+dW);dZ(d2.responseText)}}};var d1="_="+(new Date()-0);var dY=dW.indexOf("?")===-1?dW+"?"+d1:dW+"&"+d1;d2.open("GET",dY,true);if("withCredentials" in d2){d2.withCredentials=true}d2.setRequestHeader("X-Requested-With","XMLHttpRequest");d2.send();ck("debug: 正准备加载 "+dW)}}};q.checkDeps=dS;var dP=/(\?[^#]*)$/;function dI(dW){return(dW||"").replace(dP,"")}function dt(dW){return/^(?:[a-z]+:)?\/\//i.test(String(dW))}function dN(dW,dX){return"1"[0]?dW[dX]:dW.getAttribute(dX,4)}function dC(){var dW;try{a.b.c()}catch(d1){dW=d1.stack;if(!dW&&b0.opera){dW=(String(d1).match(/of linked script \S+/g)||[]).join(" ")}}if(dW){dW=dW.split(/[@ ]/g).pop();dW=dW[0]==="("?dW.slice(1,-1):dW.replace(/\s/,"");return dI(dW.replace(/(:\d+)?:\d+$/i,""))}var dX=b.getElementsByTagName("script");for(var dZ=dX.length,d0;d0=dX[--dZ];){if(d0.className===cC&&d0.readyState==="interactive"){var dY=dN(d0,"src");return d0.className=dI(dY)}}}var dw=/^callback\d+$/;function dv(dW,d5,d0){var dX=Object(cG[dW]);dX.state=4;for(var dZ=0,d3=[],d4;d4=d5[dZ++];){if(d4==="exports"){var dY=dX.exports||(dX.exports={});d3.push(dY)}else{d3.push(cG[d4].exports)}}try{var d2=d0.apply(b0,d3)}catch(d1){ck("执行["+dW+"]模块的factory抛错： "+d1)}if(d2!==void 0){dX.exports=d2}if(dw.test(dW)){delete cG[dW]}delete dX.factory;return d2}function dM(d2){if(d2.indexOf(this.res+"!")===0){d2=d2.slice(this.res.length+1)}var dZ=d2;var dY=0;var d1=this.baseUrl;var dX=this.parentUrl||d1;dB(d2,au.paths,function(d4,d3){dZ=dZ.replace(d3,d4);dY=1});if(!dY){dB(d2,au.packages,function(d5,d3,d4){dZ=dZ.replace(d4.name,d4.location)})}if(this.mapUrl){dB(this.mapUrl,au.map,function(d3){dB(dZ,d3,function(d5,d4){dZ=dZ.replace(d4,d5);dX=d1})})}var d0=this.ext;if(d0&&dY&&dZ.slice(-d0.length)===d0){dZ=dZ.slice(0,-d0.length)}if(!dt(dZ)){dX=this.built||/^\w/.test(dZ)?d1:dX;dZ=dy(dX,dZ)}var dW=dZ+d0;dZ=dW+this.query;dB(d2,au.urlArgs,function(d3){dZ+=(dZ.indexOf("?")===-1?"?":"&")+d3});this.url=dZ;return this.urlNoQuery=dW}function dm(dZ,dW,dY){var dX=ap(dZ,dW,dY);dX.sort(dO);return dX}function dl(dW){return new RegExp("^"+dW+"(/|$)")}function dV(dW){return function(){var dX;if(dW.init){dX=dW.init.apply(b0,arguments)}return dX||(dW.exports&&dL(dW.exports))}}function ap(d0,dW,dX){var d1=[];for(var dY in d0){if(b4.call(d0,dY)){var dZ={name:dY,val:d0[dY]};d1.push(dZ);dZ.reg=dY==="*"&&dW?/^/:dl(dY);if(dX&&dY!=="*"){dZ.reg=new RegExp("/"+dY.replace(/^\//,"")+"(/|$)")}}}return d1}function dB(dY,d0,dZ){d0=d0||[];for(var dW=0,dX;dX=d0[dW++];){if(dX.reg.test(dY)){dZ(dX.val,dX.name,dX);return false}}}function dO(dX,dW){var dZ=dX.name;var dY=dW.name;if(dY==="*"){return -1}if(dZ==="*"){return 1}return dY.length-dZ.length}var e=/\/\w+\/\.\./;function dy(dX,dW){if(dX.charAt(dX.length-1)!=="/"){dX+="/"}if(dW.slice(0,2)==="./"){return dX+dW.slice(2)}if(dW.slice(0,2)===".."){dX+=dW;while(e.test(dX)){dX=dX.replace(e,"")}return dX}if(dW.slice(0,1)==="/"){return dX+dW.slice(1)}return dX+dW}function dL(dX){if(!dX){return dX}var dW=b0;dX.split(".").forEach(function(dY){dW=dW[dY]});return dW}var dx=ct.scripts[ct.scripts.length-1];var dz=dx.getAttribute("data-main");if(dz){dh.baseUrl(dz);var dE=au.baseUrl;au.baseUrl=dE.slice(0,dE.lastIndexOf("/")+1);dK(dE.replace(dU,"")+".js")}else{var dG=dI(dN(dx,"src"));au.baseUrl=dG.slice(0,dG.lastIndexOf("/")+1)}};var aG=[],ah;var ai=function(e){ah=true;if(q){cG["domReady!"].state=4;q.checkDeps()}while(e=aG.shift()){e(avalon)}};function bF(){try{cX.doScroll("left");ai()}catch(ap){setTimeout(bF)}}if(ct.readyState==="complete"){setTimeout(ai)}else{if(aN){ct.addEventListener("DOMContentLoaded",ai)}else{ct.attachEvent("onreadystatechange",function(){if(ct.readyState==="complete"){ai()}});try{var af=b0.frameElement===null}catch(ca){}if(cX.doScroll&&af&&b0.external){bF()}}}avalon.bind(b0,"load",ai);avalon.ready=function(e){if(!ah){aG.push(e)}else{e(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(ct.body)});if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var az=b0.avalon;avalon.noConflict=function(e){if(e&&b0.avalon===avalon){b0.avalon=az}return avalon};if(aX===void 0){b0.avalon=avalon}return avalon}));